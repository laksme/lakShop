var webengage=webengage||{};var _weq=_weq||{};(function(a){var b={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(t){if(t==null){return""}var v="";var m,o,q,n,p,r,s;var u=0;t=b.compress(t);while(u<t.length*2){if(u%2==0){m=t.charCodeAt(u/2)>>8;o=t.charCodeAt(u/2)&255;if(u/2+1<t.length){q=t.charCodeAt(u/2+1)>>8}else{q=NaN}}else{m=t.charCodeAt((u-1)/2)&255;if((u+1)/2<t.length){o=t.charCodeAt((u+1)/2)>>8;q=t.charCodeAt((u+1)/2)&255}else{o=q=NaN}}u+=3;n=m>>2;p=((m&3)<<4)|(o>>4);r=((o&15)<<2)|(q>>6);s=q&63;if(isNaN(o)){r=s=64}else{if(isNaN(q)){s=64}}v=v+b._keyStr.charAt(n)+b._keyStr.charAt(p)+b._keyStr.charAt(r)+b._keyStr.charAt(s)}return v},decompressFromBase64:function(v){if(v==null){return""}var A="",x=0,w,f,q,s,p,r,t,u,z=0,y=b._f;v=v.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(z<v.length){p=b._keyStr.indexOf(v.charAt(z++));r=b._keyStr.indexOf(v.charAt(z++));t=b._keyStr.indexOf(v.charAt(z++));u=b._keyStr.indexOf(v.charAt(z++));f=(p<<2)|(r>>4);q=((r&15)<<4)|(t>>2);s=((t&3)<<6)|u;if(x%2==0){w=f<<8;if(t!=64){A+=y(w|q)}if(u!=64){w=s<<8}}else{A=A+y(w|f);if(t!=64){w=q<<8}if(u!=64){A+=y(w|s)}}x+=3}return b.decompress(A)},compress:function(C){if(C==null){return""}var A,x,v={},w={},u="",E="",f="",D=2,B=3,F=2,s="",G=0,z=0,t,y=b._f;for(t=0;t<C.length;t+=1){u=C.charAt(t);if(!Object.prototype.hasOwnProperty.call(v,u)){v[u]=B++;w[u]=true}E=f+u;if(Object.prototype.hasOwnProperty.call(v,E)){f=E}else{if(Object.prototype.hasOwnProperty.call(w,f)){if(f.charCodeAt(0)<256){for(A=0;A<F;A++){G=(G<<1);if(z==15){z=0;s+=y(G);G=0}else{z++}}x=f.charCodeAt(0);for(A=0;A<8;A++){G=(G<<1)|(x&1);if(z==15){z=0;s+=y(G);G=0}else{z++}x=x>>1}}else{x=1;for(A=0;A<F;A++){G=(G<<1)|x;if(z==15){z=0;s+=y(G);G=0}else{z++}x=0}x=f.charCodeAt(0);for(A=0;A<16;A++){G=(G<<1)|(x&1);if(z==15){z=0;s+=y(G);G=0}else{z++}x=x>>1}}D--;if(D==0){D=Math.pow(2,F);F++}delete w[f]}else{x=v[f];for(A=0;A<F;A++){G=(G<<1)|(x&1);if(z==15){z=0;s+=y(G);G=0}else{z++}x=x>>1}}D--;if(D==0){D=Math.pow(2,F);F++}v[E]=B++;f=String(u)}}if(f!==""){if(Object.prototype.hasOwnProperty.call(w,f)){if(f.charCodeAt(0)<256){for(A=0;A<F;A++){G=(G<<1);if(z==15){z=0;s+=y(G);G=0}else{z++}}x=f.charCodeAt(0);for(A=0;A<8;A++){G=(G<<1)|(x&1);if(z==15){z=0;s+=y(G);G=0}else{z++}x=x>>1}}else{x=1;for(A=0;A<F;A++){G=(G<<1)|x;if(z==15){z=0;s+=y(G);G=0}else{z++}x=0}x=f.charCodeAt(0);for(A=0;A<16;A++){G=(G<<1)|(x&1);if(z==15){z=0;s+=y(G);G=0}else{z++}x=x>>1}}D--;if(D==0){D=Math.pow(2,F);F++}delete w[f]}else{x=v[f];for(A=0;A<F;A++){G=(G<<1)|(x&1);if(z==15){z=0;s+=y(G);G=0}else{z++}x=x>>1}}D--;if(D==0){D=Math.pow(2,F);F++}}x=2;for(A=0;A<F;A++){G=(G<<1)|(x&1);if(z==15){z=0;s+=y(G);G=0}else{z++}x=x>>1}while(true){G=(G<<1);if(z==15){s+=y(G);break}else{z++}}return s},decompress:function(z){if(z==null){return""}if(z==""){return null}var v=[],A,E=4,y=4,B=3,f="",H="",C,u,c,I,G,F,w,x=b._f,D={string:z,val:z.charCodeAt(0),position:32768,index:1};for(C=0;C<3;C+=1){v[C]=C}c=0;G=Math.pow(2,2);F=1;while(F!=G){I=D.val&D.position;D.position>>=1;if(D.position==0){D.position=32768;D.val=D.string.charCodeAt(D.index++)}c|=(I>0?1:0)*F;F<<=1}switch(A=c){case 0:c=0;G=Math.pow(2,8);F=1;while(F!=G){I=D.val&D.position;D.position>>=1;if(D.position==0){D.position=32768;D.val=D.string.charCodeAt(D.index++)}c|=(I>0?1:0)*F;F<<=1}w=x(c);break;case 1:c=0;G=Math.pow(2,16);F=1;while(F!=G){I=D.val&D.position;D.position>>=1;if(D.position==0){D.position=32768;D.val=D.string.charCodeAt(D.index++)}c|=(I>0?1:0)*F;F<<=1}w=x(c);break;case 2:return""}v[3]=w;u=H=w;while(true){if(D.index>D.string.length){return""}c=0;G=Math.pow(2,B);F=1;while(F!=G){I=D.val&D.position;D.position>>=1;if(D.position==0){D.position=32768;D.val=D.string.charCodeAt(D.index++)}c|=(I>0?1:0)*F;F<<=1}switch(w=c){case 0:c=0;G=Math.pow(2,8);F=1;while(F!=G){I=D.val&D.position;D.position>>=1;if(D.position==0){D.position=32768;D.val=D.string.charCodeAt(D.index++)}c|=(I>0?1:0)*F;F<<=1}v[y++]=x(c);w=y-1;E--;break;case 1:c=0;G=Math.pow(2,16);F=1;while(F!=G){I=D.val&D.position;D.position>>=1;if(D.position==0){D.position=32768;D.val=D.string.charCodeAt(D.index++)}c|=(I>0?1:0)*F;F<<=1}v[y++]=x(c);w=y-1;E--;break;case 2:return H}if(E==0){E=Math.pow(2,B);B++}if(v[w]){f=v[w]}else{if(w===y){f=u+u.charAt(0)}else{return null}}H+=f;v[y++]=u+f.charAt(0);E--;u=f;if(E==0){E=Math.pow(2,B);B++}}}};a.LZString=b})(webengage);webengage.eLog=function(f,h,d,b,m,c){if(f instanceof Error){d=f.stack||f.description;d=(d.length>900?d.substring(0,900):d);b=f.message||d.substring(0,50);h="exception"}if(h){if(c&&m){var a="{'version':'"+webengage.getWidgetVersion()+"','text':'"+d+"', 'et':'"+m+"', 'eid':'"+c+"'}"}else{var a="{'version':'"+webengage.getWidgetVersion()+"','text':'"+d+"'}"}var g=(h==="error"?"//c.webengage.com/e.jpg":"//c.webengage.com/e.jpg");if(webengage.winUnloading&&h==="error"){return}var k=new Image();k.src=g+"?event="+encodeURIComponent(b)+"&category="+_weq["webengage.licenseCode"]+"&type="+h+"&data="+encodeURIComponent(a)+"&ts="+(new Date()).getTime()}};webengage.withELog=function(c,a,b){if(typeof c==="function"){try{if(!(a instanceof Array)){a=[]}return c.apply(undefined,a)}catch(d){webengage.eLog(d);if(!b){throw d}}}else{throw new Error("WithELog : first argument not a function")}};webengage.setTimeout=function(a,b){return setTimeout(function(){webengage.withELog(a)},b)};webengage.setInterval=function(b,a){return setInterval(function(){webengage.withELog(b)},a)};webengage.setTimeout(function(){(function(d,a,f,c,e){var b=function(){var m=null,n=function(G,F,D){var E=(typeof(D)==="boolean"?D:true);for(var C in F){if(G[C]===e||E){G[C]=F[C]}}return G},x={};n(c,{util:{copy:function(E,D,C){return n(E,D,C)},loadScript:function(F,G,C,H){var E=a.createElement("script");E.type="text/javascript";E.charset="UTF-8";E.async=true;E.src=F;E.callBack=G;E.callBackArgs=C||[];E.errorCallBack=H;this.appendChild(E);if(c.BrowserDetect.ie()&&c.BrowserDetect.version()<11&&E.readyState){if(typeof G==="function"){var D=function(){if(E.readyState=="loaded"||E.readyState=="complete"){c.withELog(G,C)}};E.defer=true;E.onreadystatechange=D}}else{c.util.addListener(E,"load",function(I){c.withELog(G,C)});c.util.addListener(E,"error",function(I){if(c.getWidgetVersion()!=="3.0"){c.eLog(null,"error","could not load - "+F,"script loading error")}if(typeof H==="function"){c.withELog(H,[I])}})}},createObj:function(D){var E=c,C=D?D.split("."):[];for(var F=0;F<C.length;F++){var H=C[F],G=E[H];if(!G){G={};E[H]=G}E=G}return E},extend:function(C,D){return c.util.copy((typeof C=="string"?c.util.createObj(C):C),D)},isJqueryPresent:function(){return(d.jQuery!==e&&parseFloat("."+d.jQuery().jquery.replace(/\./g,""))>=0.13)},applyCss:function(E,D){try{for(var C in D){if(typeof D[C]=="function"){E.style[C]=D[C]()}else{E.style[C]=D[C]}}}catch(F){}return E},inArray:function(C,E){for(var D=0;D<C.length;D++){if(C[D]==E){return true}}return false},getMaxZIndex:function(){if(this.maxZIndex===e){this.maxZIndex=16776271}return this.maxZIndex++},alignCenter:function(F,E,D){var C=(D=="left")?"right":"left";F.style.top=((parseInt(c.util.getElementHeight(E),10)-parseInt(c.util.getElementHeight(F),10))/2-(/Firefox/i.test(navigator.userAgent)?7:0))+"px";F.style[C]=(parseInt(c.util.getElementWidth(E),10)-parseInt(c.util.getElementWidth(F),10))/2+10+"px"},getElementWidth:function(C){if(C.clip!==e){return C.clip.width}else{if(C.style.pixelWidth){return C.style.pixelWidth}else{return C.offsetWidth}}},getElementHeight:function(C){if(C.clip!==e){return C.clip.height}else{if(C.style.pixelHeight){return C.style.pixelHeight}else{return C.offsetHeight}}},isSupportsLocalStorage:function(E){try{var C=(typeof(Storage)!=="undefined"&&"localStorage" in d&&d.localStorage!==null);if(!E&&C){d.localStorage["_we_dm_ios_sup_f_"]="true";d.localStorage.removeItem("_we_dm_ios_sup_f_")}return C}catch(D){return false}},getWindowHeight:function(){return"innerHeight" in d?d.innerHeight:a.documentElement.offsetHeight},getWindowWidth:function(){return"innerWidth" in d?d.innerWidth:a.documentElement.offsetWidth},getInitParamValue:function(C,G,D,F){var E=D!==e?D:null;if(C&&C[G]){var H=C[G];if(F){if(c.util.inArray(F,H)){E=H}}else{E=H}}return E},getInitParamValueAsArray:function(C,I,F,H){var G=c.util.getInitParamValue(C,I,F);if(G&&typeof(G)!="object"){G=G.split(/\s*,\s*/)}if(H&&typeof(H)=="object"){var D=[];for(var E=0;E<G.length;E++){if(c.util.inArray(H,G[E])){D[D.length]=G[E]}}G=D}return G},setCookie:function(D,J,E,L,G,C,F){if(c.util.isSupportsLocalStorage()&&!F){try{d.localStorage[D]=J;return"ls"}catch(H){d.localStorage.removeItem(D);return c.util.setCookie(D,J,E,L,G,C,true)}}else{if(c.util.isSupportsLocalStorage(true)&&!F){d.localStorage.removeItem(D)}var I=new Date();I.setTime(I.getTime());if(E){E=E*1000*60*60*24}var K=new Date(I.getTime()+(E));a.cookie=D+"="+encodeURIComponent(J)+((E)?";expires="+K.toGMTString():"")+((L)?";path="+L:"")+((G)?";domain="+G:"")+((C)?";secure":"");return"ck"}},getCookie:function(C,E){if(c.util.isSupportsLocalStorage(true)&&!E){return(d.localStorage[C]?d.localStorage[C]:c.util.getCookie(C,true))}else{var I=a.cookie.split(";");var D="";var G="";var H="";var F=false;for(i=0;i<I.length;i++){D=I[i].split("=");G=D[0].replace(/^\s+|\s+$/g,"");if(G==C){F=true;if(D.length>1){H=decodeURIComponent(D[1].replace(/^\s+|\s+$/g,""))}return H===null?"":H}D=null;G=""}if(!F){return null}}},addListener:function(C,D,E){if(C.addEventListener){C.addEventListener(D,E,false)}else{if(C.attachEvent){C.attachEvent("on"+D,E)}}},removeListener:function(C,D,E){if(C.removeEventListener){C.removeEventListener(D,E)}else{if(C.detachEvent){C.detachEvent("on"+D,E)}}},bindEvent:function(C,D){c.util.addListener(d,C,D)},unbindEvent:function(C,D){c.util.removeListener(d,C,D)},getCurrentTime:function(D){var G=new Date();var E=G.getTime();if(D!==e){var F=G.getTimezoneOffset()*60000;var C=E+F;E=C+(1000*D)}return E},getCurrentWeekDay:function(D){var C=u.getCurrentTime();var E=new Date(C);return E.getDay()},setWebengageCookie:function(D){var G=(function(){var H=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return((new Date().getTime())+H()+H()+H()+H())})();var F=D||{};var E={time:(new Date()).getTime(),luid:G};F=this.copy(F,E,false);var C=this.stringify(F);x._we_wk_ls_=F;this.setCookie("_we_wk_ls_",c.LZString.compressToBase64(C),99999,"/","","");if(this.firstTimeUser===e){this.firstTimeUser=true}return F},getWebengageCookie:function(){var C=this.getCookie("_we_wk_ls_")||this.getCookie("_we_wk_ls_",true)||x._we_wk_ls_;if(C){if(C.charAt(0)!=="{"){C=c.LZString.decompressFromBase64(C)}if(this.isSupportsLocalStorage()&&this.getCookie("_we_wk_ls_",true)){this.setCookie("_we_wk_ls_",C,-1,"/","","",true);this.setCookie("_we_wk_ls_",C,99999,"/","","")}x._we_wk_ls_=new Function("return "+C)()||null}else{this.setWebengageCookie()}return x._we_wk_ls_},setSessionCookie:function(F,G){var D={referrer:a.referrer,isFirstTime:this.isFirstTimeUser(),sst:(new Date()).getTime(),pvc:0,suid:(new Date().getTime()),landingPage:d.location.href};var E=F||{};E=this.copy(E,D,false);if(!this.isSupportsLocalStorage()&&E.landingPage){delete E.landingPage}var H=this.stringify(E);x._we_wk_ss_=E;var C=this.setCookie("_we_wk_ss_",c.LZString.compressToBase64(H),"","/","","");if(this.isSupportsLocalStorage()){if(C==="ls"){this.setCookie("_we_wk_ss_lsf_",true,"","/","","",true)}else{this.setCookie("_we_wk_ss_lsf_",false,"","/","","",true)}}if(typeof G==="boolean"&&true){this.updateTSC()}return E},getSessionCookie:function(){var F=this.getCookie("_we_wk_ss_")||this.getCookie("_we_wk_ss_",true)||x._we_wk_ss_;if(F){try{if(F.charAt(0)!=="{"){F=c.LZString.decompressFromBase64(F)}if(this.isSupportsLocalStorage()){var E=this.getCookie("_we_wk_ss_lsf_",true);if(!E||E==="false"){var C=this.getCookie("_we_wk_ss_",true);if(C){this.setCookie("_we_wk_ss_",F,-1,"/","","",true);this.setSessionCookie(C)}else{throw new Error()}}}x._we_wk_ss_=(new Function("return "+F)())||null}catch(D){x._we_wk_ss_=this.setSessionCookie(null,true)}}else{x._we_wk_ss_=this.setSessionCookie(null,true)}return x._we_wk_ss_},updateSessionCookie:function(D){var C=this.getSessionCookie();if(C){this.copy(C,(D||{}));this.setSessionCookie(C)}else{C=this.setSessionCookie(null,true)}return C},updateTSC:function(){var C=this.getWebengageCookie();C.sc=C.sc||0;C.sc++;return this.setWebengageCookie(C)},updateTPVC:function(){var C=this.getWebengageCookie();C.tpvc=C.tpvc||0;C.tpvc++;return this.setWebengageCookie(C)},setLST:function(){var C=this.getWebengageCookie();C.lst=(new Date()).getTime();return this.setWebengageCookie(C)},setGZIPFlag:function(D){var C=this.getWebengageCookie();C.isGzip=D||false;return this.setWebengageCookie(C)},setVTD:function(){var C=this.getSessionCookie();C.vtd=1;return this.updateSessionCookie(C)},updateSessionCookieGeoData:function(){var C={country:c.GEO.country(),region:c.GEO.region(),city:c.GEO.city(),ip:c.GEO.ip(),tsD:(c.GEO.serverTimeStamp()&&!isNaN(c.GEO.serverTimeStamp())?((new Date()).getTime()-parseInt(c.GEO.serverTimeStamp(),10)):0)};return this.updateSessionCookie(C)},getClientPageUrl:function(){return d.location.href},getClientPageHost:function(){return d.location.host},escapeScopeChars:function(C){return(C+"").replace(/([,#[\]\\])/g,"$1")},escapeForRegExp:function(C){return(C+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},isFirstTimeUser:function(){return(this.firstTimeUser!==e)?this.firstTimeUser:false},escapeNewLine:function(C){return C.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\/]/g,"\\/").replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t")},stringify:function(H){if(typeof JSON!=="undefined"&&typeof JSON.stringify==="function"){return JSON.stringify(H)}else{var F=typeof(H);if(F!=="undefined"){if(F!="object"||H===null){if(F=="string"){H='"'+this.escapeNewLine(H)+'"'}return String(H)}else{var E=[],C=(H&&H.constructor==Array),G=(H&&H instanceof Date);if(C){for(var D=0;D<H.length;D++){var I=this.stringify(H[D]);if(typeof I!=="undefined"){E.push(I)}}}else{if(G){return G.toString()}else{for(var J in H){var I=this.stringify(H[J]);if(typeof I!=="undefined"){E.push('"'+J+'":'+I)}}}}return(C?"[":"{")+String(E)+(C?"]":"}")}}}},trimStr:function(C){if(typeof C.trim==="function"){return C.trim()}else{if(typeof C==="string"){return C.replace(/^\s+|\s+$/g,"")}}return C},clientDataString:function(I){var F=function(L){var J=L;if(typeof L==="function"){try{J=L()}catch(K){J=null}}return J};if(typeof I==="object"){for(var E in I){var G=I[E];if(G===e||(typeof G!=="boolean"&&G!==0&&!G)){delete I[E];continue}if(!(G instanceof Array)){I[E]=new Array();var H=F(G);if(H===e||(typeof H!=="boolean"&&H!==0&&!H)){delete I[E]}else{I[E].push(H)}}else{var C=[];for(var D=0;D<G.length;D++){G[D]=F(G[D]);if(!(G[D]===e||(typeof G[D]!=="boolean"&&G[D]!==0&&!G[D]))){C.push(G[D])}}if(C.length>0){I[E]=C}else{delete I[E]}}}}return c.util.stringify(I)},isColorTooLight:function(D){D=D.indexOf("#")===0?D.substr(1,D.length):D;var F=parseInt(D.substr(0,2),16);var E=parseInt(D.substr(2,2),16);var C=parseInt(D.substr(4,2),16);var G=((F*299)+(E*299)+(C*299))/1000;return G>=128},isEmptyObject:function(C){for(var D in C){if(C.hasOwnProperty(D)){return false}}return true},parseJSON:function(C){return new Function("return "+C+";")()},bind:function(H,F){var I=this;var G=I.callbacks||{};if(H!==e&&typeof(F)==="function"){var J=F;F=function(){return J.apply(this,arguments)};F.cbid=(J.cbid=I.cbid++);H=(H||"").match(/\S+/g)||[""];var E=H.length;while(E--){var D=H[E];var C=G[D]||{};C[F.cbid]=F;G[D]=C}I.callbacks=G}return I},unbind:function(C,D){var E=this;if(C!==e){if(typeof(E.callbacks)==="object"&&typeof(E.callbacks[C])==="object"){if(typeof(D)==="function"&&D.cbid){delete E.callbacks[C][D.cbid]}else{delete E.callbacks[C]}}}return E},executeCallbacks:function(){var F=this;if(typeof F.enableCallbacks==="boolean"&&F.enableCallbacks){var C=arguments[0];if(C!==e&&typeof F.callbacks==="object"&&typeof F.callbacks[C]==="object"){for(var D in F.callbacks[C]){if(typeof F.callbacks[C][D]==="function"){var E=F.callbacks[C][D].apply(this,Array.prototype.slice.call(arguments,1));if(typeof E==="boolean"&&!E){return false}}}}}},markSurveyAsClosed:function(E,D){if(E){try{var C=c.util.getSessionCookie();if(C.closedSurveys===e||!C.closedSurveys){C.closedSurveys=""}if(C.closedSurveys.indexOf("##"+E)<0){C.closedSurveys+="##"+E}c.util.updateSessionCookie(C);if(D&&typeof D.dump==="function"){D.dump("close")}}catch(F){}}},markSurveyAsTaken:function(F,E,D){if(F){try{var H=true;var C=c.util.getWebengageCookie();if(C.takenSurveys===e||!C.takenSurveys){C.takenSurveys=""}if(C.takenSurveys.indexOf("##"+F)<0){C.takenSurveys+="##"+F;H=false}c.util.setWebengageCookie(C);if(E&&typeof E.dump==="function"&&D&&typeof D==="boolean"&&D){E.event=E.event||"submit";if(E.event==="submit"&&!H){E.dump(E.event)}else{if(E.event==="complete"){E.dump(E.event)}}}}catch(G){}}},markEntityAsShown:function(H,D,I,L){if(H&&D){var C=1,E=1;try{var F=c.util.getWebengageCookie(),M=c.util.getSessionCookie(),K=(("notification"===D)?(L&&L===true?"anids":"seenNIds"):(("survey"===D)?(L&&L===true?"asids":"seenSIds"):null));whatToLookInSC=(("notification"===D)?(L&&L===true?"anids":"snids"):(("survey"===D)?(L&&L===true?"asids":"ssids"):null));if(K&&whatToLookInSC){F[K]=F[K]&&F[K]!==e?F[K]:"";if(F[K].indexOf("##"+H)<0){F[K]+="##"+H+"="+C}else{var J=new RegExp("##"+H+"=(\\d+)","g");F[K]=F[K].replace(J,function(N,O){C=(+O+1);return"##"+H+"="+C})}M[whatToLookInSC]=M[whatToLookInSC]&&M[whatToLookInSC]!==e?M[whatToLookInSC]:"";if(M[whatToLookInSC].indexOf("##"+H)<0){M[whatToLookInSC]+="##"+H+"="+E}else{var J=new RegExp("##"+H+"=(\\d+)","g");M[whatToLookInSC]=M[whatToLookInSC].replace(J,function(N,O){E=(+O+1);return"##"+H+"="+E})}c.util.updateSessionCookie(M);c.util.setWebengageCookie(F)}}catch(G){}}},markNotificationAsClicked:function(G,H,E){if(G){try{var D=c.util.getWebengageCookie(),C=c.util.getSessionCookie();D.takenNIds=D.takenNIds&&D.takenNIds!==e?D.takenNIds:"";if(D.takenNIds.indexOf("##"+G)<0){D.takenNIds+="##"+G}c.util.setWebengageCookie(D);if(E&&typeof E.dump==="function"){E.dump("click")}}catch(F){}}},markNotificationAsClosed:function(F,D){if(F){try{var C=c.util.getSessionCookie();if(C.closedNIds===e||!C.closedNIds){C.closedNIds=""}if(C.closedNIds.indexOf("##"+F)<0){C.closedNIds+="##"+F}c.util.updateSessionCookie(C);if(D&&typeof D.dump==="function"){D.dump("close")}}catch(E){}}},setMinimizedState:function(C,E,G){var F=(C==="notification"?"minNIds":"minSIds");if(E){try{var D=c.util.getSessionCookie();if(D[F]===e||!D[F]){D[F]=""}if(G){if(D[F].indexOf("##"+E)<0){D[F]+="##"+E}}else{D[F]=D[F].replace("##"+E,"")}c.util.updateSessionCookie(D)}catch(H){}}},getMinimizedState:function(C,E){var F=(C==="notification"?"minNIds":"minSIds");var G=false;if(E){try{var D=c.util.getSessionCookie();if(D[F]!==e){if(0<=D[F].indexOf("##"+E)){G=true}}}catch(H){}}return G},getVersion:function(){return s.widgetVersion},usckwl:function(E){var D=c.util.getSessionCookie();D.pvc=(D.pvc?D.pvc+1:1);if(E&&a.referrer&&(!D.referrer||D.referrer!==a.referrer)){var C=a.referrer.match(/:\/\/(.[^\/]+)/)[1];if(!C.match(new RegExp(c.util.escapeForRegExp(E)+"$","gi"))){D.referrer=a.referrer}}c.util.updateSessionCookie(D)},getHashCode:function(G){var E=0,D,C,F=G||"";if(F.length==0){return E}for(D=0,l=F.length;D<l;D++){C=F.charCodeAt(D);E=((E<<5)-E)+C;E|=0}return E},getTotalTimesShown:function(I,E,D,L){var C=0;if(I&&E){var K=null,G=null;if(D){K=u.getSessionCookie();G=(("notification"===E)?(L&&L===true?"anids":"snids"):(("survey"===E)?(L&&L===true?"asids":"ssids"):null))}else{K=u.getWebengageCookie();G=(("notification"===E)?(L&&L===true?"anids":"seenNIds"):(("survey"===E)?(L&&L===true?"asids":"seenSIds"):null))}if(K&&G&&K[G]){try{var J=new RegExp("##"+I+"=(\\d+)");var F=K[G].match(J);if(F instanceof Array&&F.length>1){C=parseInt(F[1],10)}}catch(H){}}}return C},attachEventListners:function(F,C){var D=(F==="survey"?c.survey.callbacks:(F==="feedback"?c.feedback.callbacks:c.notification.callbacks));if(typeof D!==e&&D){for(eventName in D){var E=D[eventName];if(typeof callbacks!=e&&E){for(_cbid in E){this.bind.apply(C,[eventName,E[_cbid]])}}}}},hasSVG:function(){return !!a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},onDocReady:function(C){if(typeof C==="function"){if(a.body){c.withELog(function(){C()});return}if(a.addEventListener){a.addEventListener("DOMContentLoaded",function(){c.withELog(function(){a.removeEventListener("DOMContentLoaded",arguments.callee,false);C()})},false)}else{if(a.attachEvent){a.attachEvent("onreadystatechange",function(){c.withELog(function(){if(a.readyState==="complete"){a.detachEvent("onreadystatechange",arguments.callee);C()}})});if(a.documentElement.doScroll&&d==d.top){(function(){c.withELog(function(){try{a.documentElement.doScroll("left")}catch(D){setTimeout(arguments.callee,0);return}C()})})()}}}}},abortAllInstances:function(C){c.withELog(function(){if(C.length>0){for(var D=0;D<C.length;D++){if(typeof C[D].abort==="function"){C[D].abort()}}}})},abortInstance:function(C){c.withELog(function(){if(C){if(typeof C.close==="function"){C.close()}else{C.onLoad(function(){this.close()})}}})},uwats:function(){if(!f["webengage.isDemoMode"]){if(Math.floor((Math.random()*100)+1)<=10){var C=1000*60*60*24;var E=new Date().getTime()-(7*C);if(webengage_fs_configurationMap.lastWidgetCheckDate){var D=new Date(webengage_fs_configurationMap.lastWidgetCheckDate);if(D<E){c.eLog(null,"info",D.getTime(),"widget-verified")}}else{c.eLog(null,"info","no-check-date","widget-verified")}}}},isSmallScreen:function(){var C=480,D=d.screen.availWidth;return(D<=C?true:false)},webklitWorkAround:function(C){var D=a.body.scrollTop||0;if(a.location.toString().match(/#(top)?$/)){C.body.scrollTop=0;a.body.scrollTop=D}},getWeDataContainer:function(){return s.weDataContainer},withWeJquery:function(C){c.jQSt=c.jQSt||0;switch(c.jQSt){case 1:setTimeout(function(){c.util.withWeJquery(C)},100);break;case 2:if(typeof C==="function"){C()}break;default:c.jQSt=1;c.util.loadScript.apply(s.widgetContainer,[s.weJquery,function(){$weJQuery=jQuery.noConflict(true);c.jQSt=2;if(typeof C==="function"){C()}}]);break}},tsTracking:function(D,E){if(D){var C=new Image();C.src="//"+s.tstbu+D+(E?"?"+E:"")}},isElementExists:function(D){var C=(D);if(C&&D.nodeType&&D.nodeType===1){C=(D.style&&((D.style.display&&D.style.display==="none")||(D.style.visibility&&D.style.visibility==="hidden")))?false:true}return C}}},true);n(c,{getWidgetVersion:function(){return f["webengage.widgetVersion"]||"4.0"}},true);var u=c.util;var s={widgetVersion:"4",weJquery:"//d3701cc9l7v9a6.cloudfront.net/js/jquery/jquery-1.3.2.min.js",baseWebEngageUrl:"//webengage.com",feedbackAppHost:"feedback.webengage.com",surveyAppHost:"survey.webengage.com",widgetDomain:"//d3701cc9l7v9a6.cloudfront.net",baseStaticUrl:"//d3701cc9l7v9a6.cloudfront.net",loadSurveyWidgetUrl:function(C){return"/js/widget/we-survey-widget-"+(C?C:"~483819f")+"-v-4.0.js?v=385.00"},loadSurveyWidgetUrlv3:"/js/widget/we-survey-widget.js?v=385.00",notificationWidgetScriptUrl:"/js/widget/we-notification-widget-v-4.1.js?v=385.00",findAllTakenSurveysUrl:function(){return"//survey.webengage.com/publisher-widget-loader.html?action=findAllTakenSurveys&licenseCode="+f["webengage.licenseCode"]+"&url="+encodeURIComponent(u.getClientPageUrl())},widgetContainerId:"webklipper-publisher-widget-container",feedbackImageBaseUrl:"//s3-ap-southeast-1.amazonaws.com/wk-static-files/webengage/feedbacktab/",loadFeedbackWidgetUrl:"/js/widget/we-feedback-widget-v-4.0.js?v=385.00",loadFeedbackWidgetUrlv3:"/js/widget/we-feedback-widget.js?v=385.00",gaCallbacksScriptUrl:"//d3701cc9l7v9a6.cloudfront.net/js/widget/ga-callbacks-helper.js?v=385.00",tstbu:"c.webengage.com",csUrl:"//d3701cc9l7v9a6.cloudfront.net/js/widget/we-conversion-helper-min-v-1.0.js?v=385.00"};var A={};u.extend("logger",(function(){var D={containerCss:{position:function(){return c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?"absolute":"fixed"},cursor:"default",margin:0,zIndex:(u.getMaxZIndex()+1),backgroundColor:"red",right:"0px",bottom:"0px",display:"block",padding:"10px",maxWidth:"500px",textAlign:"left",lineHeight:"17px",background:"none repeat scroll 0 0 #ff9",border:"1px solid #fc6",borderBottomWidth:"0px",borderRightWidth:"0px",borderTopLeftRadius:"5px",MozBorderRadiusTopleft:"5px",WebkitBorderTopLeftRadius:"5px",boxShadow:"0 1px 0 0 rgba(255, 255, 255, 0.6) inset, 0 1px 1px rgba(0, 0, 0, 0.1)",MozBoxShadow:"0 1px 0 0 rgba(255, 255, 255, 0.6) inset, 0 1px 1px rgba(0, 0, 0, 0.1)",WebkitBoxShadow:"0 1px 0 0 rgba(255, 255, 255, 0.6) inset, 0 1px 1px rgba(0, 0, 0, 0.1)",fontFamily:"Arial, sans-serif",fontSize:"13px"},dataDivCss:{margin:"0px",padding:"0px",color:"#000",textShadow:"1px 1px #f1f1f1",textDecoration:"none",fontFamily:"inherit",fontSize:"inherit"},dataDivLinkCss:{color:"#039",textDecoration:"underline",textShadow:"1px 1px #f1f1f1",fontFamily:"inherit",fontSize:"inherit"},closeButtonCss:{color:"#039",textDecoration:"underline",textShadow:"1px 1px #f1f1f1",cursor:"pointer",cssFloat:"right",styleFloat:"right",marginRight:"5px",marginLeft:"30px"}},C=function(O,N){var G=a.getElementById("webengage-error-messages");if(G){G.parentNode.removeChild(G)}var I=a.createElement("div");I.setAttribute("id","webengage-error-messages");I=u.applyCss(I,D.containerCss);a.body.insertBefore(I,null);var M=a.createElement("div");M=u.applyCss(M,D.closeButtonCss);M.innerHTML="x";I.appendChild(M);M.onclick=function(){this.parentNode.parentNode.removeChild(this.parentNode)};var F=a.createElement("div");F=u.applyCss(F,D.dataDivCss);I.appendChild(F);F.innerHTML=O;var J=F.getElementsByTagName("a");if(J&&J.length>0){for(var K=0;K<J.length;K++){u.applyCss(J[K],D.dataDivLinkCss);var H=J[K].getAttribute("href");var E=H.split("#");var L=E[0];L=L.indexOf("?")<0?(L+"?"):L;L=L+"&ref=widget-message";L=E.length==2?(L+"#"+E[1]):L;J[K].setAttribute("href",L)}}c.eLog(null,N,O,O);setTimeout(function(){I.remove()},5000);return I};return{success:function(E){return C(E,"success")},warn:function(E){return C(E,"warn")},error:function(E){return C(E,"error")}}})());u.extend("GEO",{country:function(){return this._country||""},country_code:function(){return this._country_code||""},region:function(){return this._region||""},city:function(){return this._city||""},latitude:function(){return this._latitude||""},longitude:function(){return this._longitude||""},serverTimeStamp:function(){return this._serverTimeStamp},ip:function(){return this._ip||""},setGeoData:function(E){var D=this,C=E||{};D._country=C.geoplugin_countryName||"";D._country_code=C.geoplugin_country_code||"";D._region=C.geoplugin_region||"";D._city=C.geoplugin_city||"";D._latitude=C.geoplugin_latitude||"";D._longitude=C.geoplugin_longitude||"";D._serverTimeStamp=C.serverTimeStamp;D._ip=C.clientIp;c.getUser().country=D._country;c.getUser().city=D._city;c.getUser().ip=D._ip},isGeoLoaded:function(){return this._isLoaded?this._isLoaded:u.getSessionCookie().tsD?true:false},load:function(F,C){var D=this;if(!this.isGeoLoaded()){var E="//geoservice.webengage.com/geoip/?jsoncallback="+encodeURI("webengage.GEO.setGeoData");u.loadScript.apply(s.widgetContainer,[E,function(){u.updateSessionCookieGeoData();D._isLoaded=true;if(typeof F==="function"){F()}},null,function(){if(typeof C==="function"){C()}}])}else{D._isLoaded=true;if(typeof F==="function"){F()}}}});u.extend("BrowserDetect",(function(){var F,H,D,J=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:d.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Windows,Trident",identity:"Explorer",versionSearch:"rv"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],G=[{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"Windows Phone",identity:"Windows Phone"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.userAgent,subString:"Mobile",identity:"Mobile"}],E=[{string:navigator.userAgent,subString:"iPhone",identity:"Mobile"},{string:navigator.userAgent,subString:"iPod",identity:"Mobile"},{string:navigator.userAgent,subString:"Android,Mobile",identity:"Mobile"},{string:navigator.userAgent,subString:"Windows Phone",identity:"Mobile"},{string:navigator.userAgent,subString:"BlackBerry,Mobile",identity:"Mobile"},{string:navigator.userAgent,subString:"BB10,Mobile",identity:"Mobile"},{string:navigator.userAgent,subString:"Android",identity:"Tablet"},{string:navigator.userAgent,subString:"iPad",identity:"Tablet"},{string:navigator.userAgent,subString:"Windows,Tablet",identity:"Tablet"}],C=function(R){for(var N=0;N<R.length;N++){var O=R[N].string;var Q=R[N].prop;this._versionSearchString=R[N].versionSearch||R[N].identity;if(O){var P=R[N].subString.split(",");var M=false;for(var L=0;L<P.length;L++){if(O.indexOf(P[L])==-1){M=false;break}M=true}if(M){return R[N].identity}}else{if(Q){return R[N].identity}}}},I=function(N){var M=N.indexOf(this._versionSearchString);if(M==-1){return}var L=parseFloat(N.substring(M+this._versionSearchString.length+1));if(F=="Explorer"&&7<=L){if(N.indexOf("Trident/4")!=-1){L=8}else{if(N.indexOf("Trident/5")!=-1){L=9}else{if(N.indexOf("Trident/6")!=-1){L=10}}}}return L},K=function(){if(F&&H&&D){return}F=C(J)||"An unknown browser";H=I(navigator.userAgent)||I(navigator.appVersion)||"an unknown version";D=C(G)||"an unknown OS";_device=C(E)||(u.isSmallScreen()?"Mobile":"Desktop")};return{browser:function(){return K()||F},version:function(){return K()||H},os:function(){return K()||D},device:function(){return K()||_device},is_this_the_worlds_most_annoying_browser:function(){return(typeof a.all!=="undefined"&&!d.opera&&!d.XMLHttpRequest)},ie:function(){return K()||F=="Explorer"},isMobile:function(){var N=this.os(),L=false,O=["iOS","Android","Windows Phone","Mobile"];for(var M=0;M<O.length;M++){if(N==O[M]){L=true;break}}return L}}})());var y={onRun:function(C){return this.bind("run",C)},onLoad:function(C){return this.bind("load",C)},onOpen:function(C){return this.bind("open",C)},onView:function(C){return this.bind("view",C)},onSubmit:function(C){return this.bind("submit",C)},onClick:function(C){return this.bind("click",C)},onComplete:function(C){return this.bind("complete",C)},onClose:function(C){return this.bind("close",C)},onDump:function(C){return this.bind("dump",C)},bind:function(){return u.bind.apply(this,arguments)},unbind:function(){return u.unbind.apply(this,arguments)},executeCallbacks:function(){return u.executeCallbacks.apply(this,arguments)}};u.extend("",(function(){var C=function(){var G={wv:u.getVersion(),licenseCode:m,tzo:(A.configurationMap.tzo||0)};var F=u.getWebengageCookie();G.luid=F.luid;G.ust=F.time;G.lst=F.lst;G.sc=F.sc;G.tpvc=F.tpvc;var E=u.getSessionCookie();G.ref=E.referrer;G.sst=E.sst;G.pvcs=E.pvc;G.suid=E.suid;if(E.landingPage){G.lp=E.landingPage}G.pageTitle=a.title;G.pageURL=d.location.href;G.viewportHeight=u.getWindowHeight();G.viewportWidth=u.getWindowWidth();G.ver=1;return G},D=function(H,J,I){var F="//c.webengage.com"+H;try{if(c.BrowserDetect.ie()){throw new Error("This browser does not support XMLHttpRequest.")}var N=d.XMLHttpRequest;if(typeof N==="undefined"){N=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(S){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(S){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(S){}throw new Error("This browser does not support XMLHttpRequest.")}}var O=new N();var E=J?"POST":"GET";O.open(E,F,true);O.onreadystatechange=function(){if(O.readyState==4){if(O.status==200){if(I&&typeof I==="function"){I()}}}};O.setRequestHeader("Content-type","application/x-www-form-urlencoded");var Q=Object.keys(J).map(function(S){return encodeURIComponent(S)+"="+encodeURIComponent(J[S])}).join("&");O.send(Q)}catch(M){try{var L=a.createElement("iframe");var K="WE_XHR_POST_IFRM";a.body.appendChild(L);L.style.display="none";L.contentWindow.name=K;var G=a.createElement("form");G.target=K;G.action=F;G.method="POST";for(var R in J){var P=a.createElement("input");P.type="hidden";P.name=R;P.value=J[R];G.appendChild(P)}a.body.appendChild(G);G.submit();L.onload=function(){if(L.parentNode){L.parentNode.removeChild(L)}}}catch(M){}}};return{dump:function(H,G,I){H=H||"unknown";var F=C();F=u.copy(F,(I||{}),true);F.we_category=(H||"unknown");F.we_event=(G||"unknown");var E=u.stringify(F);E=c.LZString.compressToBase64(E);D("/l.jpg",{data:E})}}})());u.extend("feedback",(function(){var C=[];return{cbid:1,getMobileLoadingDiv:function(E){var D=a.createElement("div");D.id=E||s.widgetContainerId+"-loading";D=c.util.applyCss(D,{position:"fixed",left:(c.util.getWindowWidth()*0.05)+"px",width:(c.util.getWindowWidth()*0.9)+"px",opacity:"1",background:"#f9f9f9",color:"#666","z-index":c.util.getMaxZIndex(),textAlign:"center","padding-top":"20px","padding-bottom":"20px",fontFamily:"Arial, sans-serif",fontSize:"10px",display:"none"});return D},getLoadingDiv:function(E){var D=a.createElement("div");D.id=E||s.widgetContainerId+"-loading";D=c.util.applyCss(D,{fontFamily:"Arial, sans-serif",fontSize:"10px",color:"#666",textDecoration:"none",position:"absolute",textAlign:"center"});return D},getLightBoxBaseDiv:function(){var D=a.createElement("div");c.util.applyCss(D,{display:"block",margin:"0",padding:"0","z-index":c.util.getMaxZIndex(),position:"absolute",overflow:"hidden",top:"0",left:"0",height:a.body.scrollHeight+"px",width:"100%","background-color":"rgba(0, 0, 0, .85)"});D.id=s.widgetContainerId+"-base";return D},getLightBoxContainerDiv:function(){var E=a.createElement("div");c.util.applyCss(E,{display:"block",top:"0",left:"0",width:"100%",height:c.util.getWindowHeight()+"px",position:"absolute",outline:"none !important","-webkit-backface-visibility":"hidden",margin:"0",padding:"0","z-index":c.util.getMaxZIndex(),"-webkit-overflow-scrolling":"touch"});E.setAttribute("tabIndex",-1);E.id=s.widgetContainerId+"-light-box-container";var D=a.createElement("div");c.util.applyCss(D,{display:"block","text-align":"center",position:"absolute",width:"100%",height:"100%",left:"0",top:"0",outline:"none !important","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box",padding:"0 8px",margin:"0","overflow-y":"auto","overflow-x":"hidden"});D.id=s.widgetContainerId+"-light-box-content";E.appendChild(D);return E},render:function(D){return c.withELog(function(){return(new function(){c.feedback.clear();var Q=this;Q.cbid=1;C[C.length]=Q;Q.abort=function(){u.abortInstance(this)};Q._feedbackOptions={launchType:f["webengage.feedback.launchType"]||"",externalLinkId:f["webengage.feedback.externalLinkId"]||"",alignment:f["webengage.feedback.alignment"]||"",borderColor:f["webengage.feedback.borderColor"]||"",backgroundColor:f["webengage.feedback.backgroundColor"]||"",snapshotEnabled:f["webengage.feedback.snapshotEnabled"]||"",defaultCategory:f["webengage.feedback.defaultCategory"]||"",showAllCategories:(typeof f["webengage.feedback.showAllCategories"]==="boolean"&&!f["webengage.feedback.showAllCategories"])?false:true,showForm:f["webengage.feedback.showForm"]||false,isDemoMode:f["webengage.feedback.isDemoMode"]||f["webengage.isDemoMode"]||false,customData:f["webengage.feedback.customData"]||f["webengage.customData"]||{},formData:f["webengage.feedback.formData"]||f["webengage.formData"]||[],enableCallbacks:f["webengage.feedback.enableCallbacks"]||f["webengage.enableCallbacks"]||false,language:f["webengage.language"]||""};if(D!==e&&D.data!==e&&D.data){var af=D.data;if(af.name!==e&&af.name){Q._feedbackOptions.formData.push({name:"name",value:af.name})}if(af.email!==e&&af.email){Q._feedbackOptions.formData.push({name:"email",value:af.email})}if(af.category!==e&&af.category){Q._feedbackOptions.formData.push({name:"category",value:af.category})}}var I={feedbackLaunchType:"launchType",feedbackExternalLinkId:"externalLinkId",feedbackButtonAlignment:"alignment",feedbackButtonBorderColor:"borderColor",feedbackButtonBackgroundColor:"backgroundColor",defaultFeedbackCategory:"defaultCategory",showAllFeedbackCategories:"showAllCategories",showFeedbackForm:"showForm",data:"customData",demo:"isDemoMode"};if(D!==e&&!u.isEmptyObject(D)){for(var E in D){var ac=I[E];if(ac!==e&&ac){D[ac]=D[E];delete D[E]}}}Q._feedbackOptions=u.copy(Q._feedbackOptions,(D?D:{}),true);Q.enableCallbacks=(typeof Q._feedbackOptions.enableCallbacks==="boolean"?Q._feedbackOptions.enableCallbacks:false);u.copy(Q,y,true);Q.onLoad((Q._feedbackOptions.onLoad||f["webengage.feedback.onLoad"]));Q.onSubmit((Q._feedbackOptions.onSubmit||f["webengage.feedback.onSubmit"]));Q.onClose((Q._feedbackOptions.onClose||f["webengage.feedback.onClose"]));Q.onOpen((Q._feedbackOptions.onOpen||f["webengage.feedback.onOpen"]));u.attachEventListners("feedback",Q);if(A.feedback&&(A.feedback.isEnabled||Q._feedbackOptions.isDemoMode)&&(a.location.protocol=="http:"||(a.location.protocol=="https:"&&A.sslEnabled))&&!A.isFQuotaOver){var R=A.feedback.config,Y={alignment:["right","left"],launchTypes:["feedbackButton","externalLink"],containerCss:{margin:0,padding:0,position:(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?"absolute":"fixed"),border:"5px solid #ccc",backgroundColor:"#f9f9f9",borderWidth:"1px",borderStyle:"solid"},containerRightCss:{right:"0px",borderRightWidth:"0px"},containerLeftCss:{left:"0px",borderLeftWidth:"0px"},commonCss:{margin:0,padding:0,cursor:"pointer",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundPosition:"center 0",display:"block",paddingBottom:"7px",paddingLeft:"3px",paddingRight:"3px",paddingTop:"7px"},tabCssWithIcon:{backgroundPosition:"center bottom",paddingBottom:"33px"},closeCommonCss:{height:"22px",width:"22px",cursor:"pointer",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",position:"absolute",top:"-14px",backgroundImage:"url('"+s.baseStaticUrl+"/images/icons/feedback-widget-close.png')",backgroundColor:"transparent",display:"none"},leftCloseCss:{right:"-14px"},rightCloseCss:{left:"-14px"},feedbackBgImageForDarkBackground:s.baseStaticUrl+"/images/webengage/icons/feedback-tab-bg-dark.png",feedbackBgImageForLightBackground:s.baseStaticUrl+"/images/webengage/icons/feedback-tab-bg-light.png",feedbackTextImage:s.feedbackImageBaseUrl+R.imgPath,sizeCss:{height:R.imgHeight+"px",width:R.imgWidth+"px"},leftCss:{cssFloat:"right",styleFloat:"right"},rightCss:{cssFloat:"left",styleFloat:"left"},loadingCss:{fontFamily:"Arial, sans-serif",fontSize:"10px",color:"#666",textDecoration:"none",position:"absolute",textAlign:"center"},maxWidth:"450px",maxHeight:(c.BrowserDetect.ie()?"349px":"345px")},aa={getButtonCssBasedOnConfig:function(ah,ai){var ag={};ag=u.copy(ag,Y.sizeCss);if(ah=="left"){ag=u.copy(ag,Y.leftCss)}else{ag=u.copy(ag,Y.rightCss)}if(ai){ag=u.copy(ag,Y.tabCssWithIcon)}return ag},getContainerCssBasedOnConfig:function(ah){var ag={};ag=u.copy(ag,Y.containerCss);if(ah=="right"){ag=u.copy(ag,Y.containerRightCss)}else{ag=u.copy(ag,Y.containerLeftCss)}return ag},getCloseCssBasedOnConfig:function(ah){var ag={};if(ah=="right"){ag=u.copy(ag,Y.rightCloseCss)}else{ag=u.copy(ag,Y.leftCloseCss)}return ag},getButtonCssBasedOnBackgroundColor:function(ah){var ag={};if(u.isColorTooLight(ah)){ag=u.copy(ag,{backgroundImage:("url('"+Y.feedbackBgImageForLightBackground+"')")})}else{ag=u.copy(ag,{backgroundImage:("url('"+Y.feedbackBgImageForDarkBackground+"')")})}return ag},getCustomTextImageCss:function(){var ag={};ag=u.copy(ag,{backgroundImage:("url('"+Y.feedbackTextImage+"')")});return ag}},X=(R.closeImg===e||R.closeImg===null||R.closeImg==="")?(s.baseStaticUrl+"/images/icons/feedback-widget-close.png"):("//s3-ap-southeast-1.amazonaws.com/"+R.closeImg),W=u.getInitParamValue(Q._feedbackOptions,"alignment",R.alignment,Y.alignment),K=u.getInitParamValueAsArray(Q._feedbackOptions,"launchType",R.launchType,Y.launchTypes),J=u.getInitParamValueAsArray(Q._feedbackOptions,"externalLinkId",R.externalLinkId),O=u.getInitParamValue(Q._feedbackOptions,"backgroundColor",R.backgroundColor),ad=u.getInitParamValue(Q._feedbackOptions,"borderColor",R.borderColor),Z=u.getInitParamValue(Q._feedbackOptions,"snapshotEnabled",((R.snapshotEnabled===e)?true:R.snapshotEnabled)),ab=u.inArray(K,Y.launchTypes[0]),S=R.imgWidth,M=R.imgHeight,P=R.showWeIcon;O=O.indexOf("#")===0?O:("#"+O);ad=ad.indexOf("#")===0?ad:("#"+ad);var U=a.createElement("div");s.widgetContainer.appendChild(U);U.setAttribute("id",s.widgetContainerId+"-content");var ae=U.style;U=u.applyCss(U,Y.containerCss);U=u.applyCss(U,aa.getContainerCssBasedOnConfig(W));U.style.width=(parseInt(S)+3+3)+"px";var G=(parseInt(M)+7+7+(P?(3+26):0))+"px";ae.borderColor=ad;ae.top=(("innerHeight" in d?d.innerHeight:a.documentElement.clientHeight)-parseInt(M))/2+"px";ae.zIndex=(u.getMaxZIndex()+1);var N=a.createElement("div");U.appendChild(N);N.id=s.widgetContainerId+"-close-div";N=u.applyCss(N,Y.closeCommonCss);N=u.applyCss(N,aa.getCloseCssBasedOnConfig(W));N.style.backgroundImage="url('"+X+"')";if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){N.style.backgroundImage="";N.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+X+"')"}var V=a.createElement("div");U.appendChild(V);V.setAttribute("id",s.widgetContainerId+"-content-expand-collapse");var T=V.style;V=u.applyCss(V,Y.commonCss);V=u.applyCss(V,aa.getButtonCssBasedOnConfig(W,P));V=u.applyCss(V,aa.getButtonCssBasedOnBackgroundColor(O));if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){T.backgroundImage="";var F=(u.isColorTooLight(O)?Y.feedbackBgImageForLightBackground:Y.feedbackBgImageForDarkBackground);T.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+F+"')"}T.backgroundColor=O;T.zIndex=u.getMaxZIndex()+1;if(!ab){U.style.display="none"}var L=a.createElement("div");V.appendChild(L);L.style.width=parseInt(S)+"px";L.style.height=parseInt(M)+"px";L.style.margin="0px";L.style.padding="0px";L=u.applyCss(L,aa.getCustomTextImageCss());if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){L.style.backgroundImage="";T.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+Y.feedbackTextImage+"')"}N.style.zIndex=u.getMaxZIndex()+1;Q.close=function(){try{U.removeChild(a.getElementById(s.widgetContainerId+"-loading"))}catch(ag){}try{U.removeChild(a.getElementById(s.widgetContainerId+"-content"))}catch(ag){}try{a.getElementById(s.widgetContainerId+"-content-expand-collapse").isCurrentlyOpen=false}catch(ag){}N.style.display="none";U.style.width=(parseInt(S)+3+3)+"px";if(!ab){V.style.display="none"}};N.onclick=function(){c.withELog(function(){Q.close()})};function H(){if(f["webengage.feedback.custom"]){U.style.display="block";U.style.border="none";U.style["background-color"]="transparent";U.style.position="static";U.style.overflow="visible";U.style.width="0px";U.style.height="0px"}else{if(R.mobileLB&&(c.BrowserDetect.isMobile()||u.isSmallScreen())){U.style.display="block";var aj=c.feedback.getLightBoxBaseDiv();s.weDataContainer.appendChild(aj);var ai=c.feedback.getLightBoxContainerDiv();s.weDataContainer.appendChild(ai);var ah=c.feedback.getMobileLoadingDiv();ah.innerHTML="Loading<br/>please wait ...";s.weDataContainer.appendChild(ah);var ak=c.util.getElementHeight(ah);var al=c.util.getWindowHeight();ah.style.top=(al-ak)/2+"px";ah.style.display="block"}else{U.style.display="block";U.style.width="300px";var ah=c.feedback.getLoadingDiv();ah=u.applyCss(ah,Y.loadingCss);ah.innerHTML="Loading<br/>please wait ...";U.appendChild(ah);u.alignCenter(ah,U,W);N.style.display="block"}}Q.feedbackLoadStartTime=new Date();var ag=s.widgetDomain+(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?s.loadFeedbackWidgetUrlv3:s.loadFeedbackWidgetUrl);c.feedbackLoadStartTime=new Date();u.withWeJquery(function(){var am=a.createElement("script");am.type="text/javascript";am.src=ag;s.widgetContainer.appendChild(am)})}V.onclick=function(){c.withELog(function(){H()})};if(J&&J.length>0){(function(){for(var ah=0;ah<J.length;ah++){var ai=J[ah];var ag=a.getElementById(ai);if(ag){ag.onclick=function(aj){var ak=aj||d.event;ak.cancelBubble=true;if(ak.stopPropagation){ak.stopPropagation()}if(ak.preventDefault){ak.preventDefault()}else{ak.returnValue=false}V.onclick();return false}}}})()}a.$FeedbackWidgetInitializer={containerId:s.widgetContainerId,licenseCode:m,appHost:s.feedbackAppHost,minWidth:(parseInt(S)+3+3)+"px",maxWidth:Y.maxWidth,minHeight:G,maxHeight:Y.maxHeight,showFeedbackButton:ab,buttonAlignment:W,borderColor:ad.substring(1),snapshotEnabled:Z,currentInstance:Q,mobileLBEnabled:R.mobileLB&&(c.BrowserDetect.isMobile()||u.isSmallScreen()),widgetLanguage:Q._feedbackOptions.language};if(Q._feedbackOptions.showForm==true){V.onclick()}}else{if(A.feedback&&A.feedback.isEnabled&&a.location.protocol=="https:"&&!A.sslEnabled){c.eLog(null,"error","Feedback - Widget turned off for SSL encrypted page","Feedback - Widget turned off for SSL encrypted page")}}})})},clear:function(){c.withELog(function(){try{s.widgetContainer.removeChild(a.getElementById(s.widgetContainerId+"-content"))}catch(D){}C=[];a.$FeedbackWidgetInitializer=null})},abort:function(){u.abortAllInstances(C)},attachEventListner:function(){var D=this,E=arguments;c.withELog(function(){u.bind.apply(D,E);if(C.length>0){for(var F=0;F<C.length;F++){C[F].enableCallbacks=true;u.bind.apply(C[F],E)}}})}}})());u.extend("ruleExecutor.constants",{SEARCH_ENGINE_REGEXP:{google:{pattern:"^(?:http(s)?://)?(www\\.)?google\\..*/.*$",queryParam:"q"},yahoo:{pattern:"^(?:http(s)?://)?(?:([a-z]{2})\\.)?search\\.yahoo\\.com/.*$",queryParam:"p"},bing:{pattern:"^(?:http(s)?://)?((?:www|[a-z]{2})\\.)?bing\\.com/search\\?.*$",queryParam:"q"},ask:{pattern:"^(?:http(s)?://)?www\\.ask\\.com/.*$",queryParam:"q"},baidu:{pattern:"^(?:http(s)?://)?www\\.baidu\\.com/.*$",queryParam:"wd"},yandex:{pattern:"^(?:http(s)?://)?www\\.yandex\\.com/.*$",queryParam:"text"},duckduckgo:{pattern:"^(?:http(s)?://)?www\\.duckduckgo\\.com/.*$",queryParam:"q"}},SOCIAL_MEDIA_REGEX:"^(?:http(s)?://)?(.*.)?(facebook|twitter|t|pinterest)\\.(com|co)/.*$",XPATH_PLUGIN_FILE:"//d3701cc9l7v9a6.cloudfront.net/js/jquery/wgxpath.install.js"});u.extend("ruleExecutor.dependencies",{XPATH:function(D,E,C){c.XPATH.util.loadXPath(E,C)},GEO:function(D,E,C){c.GEO.load(E,C)}});u.extend("XPATH.util",(function(){return{loadXPath:function(E,D){if((c.BrowserDetect.browser()==="Explorer")&&(!a.evaluate)){var C="//d3701cc9l7v9a6.cloudfront.net/js/jquery/wgxpath.install.js";u.loadScript.apply(s.widgetContainer,[C,function(){wgxpath.install();if(typeof E==="function"){E()}},null,function(){if(typeof D==="function"){D()}}])}else{if(typeof E==="function"){E()}}},isXpathLoaded:function(){return(a.evaluate?true:false)},getXPathElement:function(E){var C=null;if(E&&E.indexOf("|")>-1){var D=E.split("|");E=D[0]+"/@"+D[1]}try{xpathResult=a.evaluate(E,a,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null);C=(xpathResult&&xpathResult.singleNodeValue&&c.util.isElementExists(xpathResult.singleNodeValue))?xpathResult.singleNodeValue:null}catch(F){}return C},evaluateXPathQuery:function(D){var C=c.XPATH.util.getXPathElement(D);if(C){return C.textContent}else{return null}}}})());u.extend("ruleExecutor.dependency.util",{xPathExists:function(){if(c.XPATH.util.isXpathLoaded()){return true}else{var C={};C.type="XPATH";throw C}},geoDataExists:function(){if(c.GEO.isGeoLoaded()){return true}else{var C={};C.type="GEO";throw C}}});u.extend("ruleExecutor.util",(function(C){return{isMatches:function(F,D){if(F){if(F instanceof Array){for(var G=0;G<F.length;G++){if(c.ruleExecutor.util.isMatches(F[G],D)){return true}}}else{if(D instanceof Array){for(var E=0;E<D.length;E++){if(F.match(new RegExp(D[E],"mgi"))){return true}}}else{if(F.match(new RegExp(D,"mgi"))){return true}}}}return false},getCurrentTimeInSec:function(G){var F=new Date(G);var D=F.getHours();var H=F.getMinutes();var E=F.getSeconds();return(D*60*60+H*60+E)},getClientTime:function(){var D=u.getCurrentTime();return c.ruleExecutor.util.getCurrentTimeInSec(D)},getClientDayOfWeek:function(){return u.getCurrentWeekDay()},getPublisherTime:function(){var D=u.getCurrentTime(s.publisherTimeZoneOffset);return c.ruleExecutor.util.getCurrentTimeInSec(D)},isContainsSearchTerms:function(F,G){var E=false;if(typeof F!=="function"||!G||!(G instanceof Array)||G.length<=0){return false}var D=F();if(typeof D!==e&&D){for(var H=0;H<G.length;H++){E=c.ruleExecutor.util.isContains(D,c.ruleExecutor.util.jsTokenizer(G[H]," "),"contains_all");if(typeof E==="boolean"&&E){break}}}return E},isContains:function(I,M,E){var L=I;if(typeof(I)==="function"){L=I()}var K=false;var F=E||"contains_any";if(L!==e&&L){var D=[];if(L instanceof Array){for(var J=0;J<L.length;J++){D[L[J].toLowerCase()]=true}}else{D[L]=true}if(M!==e&&M){if(M instanceof Array){if(F=="contains_all"){for(var H=0;H<M.length;H++){if(D[M[H].toLowerCase()]==true){K=true;continue}K=false;break}}else{for(var G=0;G<M.length;G++){if(D[M[G].toLowerCase()]==true){K=true;break}}}}else{K=D[M.toLowerCase()]==true}}}return K},getReferrers:function(){var E=[];if(a.referrer){E[E.length]=a.referrer.toLowerCase()}var D=u.getSessionCookie();if(D&&D.referrer&&(!a.referrer||D.referrer!=a.referrer)){E[E.length]=D.referrer.toLowerCase()}return E},getCountry:function(){if(c.ruleExecutor.dependency.util.geoDataExists()){return u.getSessionCookie().country||null}},getRegion:function(){if(c.ruleExecutor.dependency.util.geoDataExists()){return u.getSessionCookie().region||null}},getCity:function(){if(c.ruleExecutor.dependency.util.geoDataExists()){return u.getSessionCookie().city||null}},getSearchEngineMatchResult:function(){var G=c.ruleExecutor.util.getReferrers();var D={isSER:false};for(var F in C.SEARCH_ENGINE_REGEXP){for(var E=0;E<G.length;E++){if(c.ruleExecutor.util.isMatches(G[E],C.SEARCH_ENGINE_REGEXP[F].pattern)!=false){D.isSER=true;D.url=G[E];D.queryParam=C.SEARCH_ENGINE_REGEXP[F].queryParam;break}}if(D.isSER===true){break}}return D},isSearchEngineReference:function(){return(c.ruleExecutor.util.getSearchEngineMatchResult()).isSER},isSocialMediaReference:function(){return c.ruleExecutor.util.isMatches(c.ruleExecutor.util.getReferrers(),C.SOCIAL_MEDIA_REGEX)},isFirstTime:function(){var D=u.getSessionCookie();return(D&&(typeof D.isFirstTime==="boolean"&&D.isFirstTime))?true:false},getSearchTerms:function(){var F=null;var D=c.ruleExecutor.util.getSearchEngineMatchResult();if(D.isSER){var E=decodeURI(c.ruleExecutor.util.getParamValue(D.url,D.queryParam));if(E){F=c.ruleExecutor.util.jsTokenizer(E," ")}}return F},jsTokenizer:function(G,I){var H=[];if(G!==e&&G){var F=u.escapeForRegExp(",\r\n");if(I!==e&&I){if(I instanceof Array){F=u.escapeForRegExp(I.join(""))}else{F=u.escapeForRegExp(I)}}G=G.replace(new RegExp("["+F+"]","g"),"\n");var D=G.split(/\n/g);for(var E=0;E<D.length;E++){if(D[E]!=""){H[H.length]=D[E]}}}return H},getParamValue:function(E,G){var H="";var F=new RegExp("[\\?&]"+G+"=([^&#]*)");var D=F.exec(E);if(D!==null){H=D[1]}return H},getBrowser:function(){return c.BrowserDetect.browser()},getBrowserVersion:function(){return c.BrowserDetect.version()},getOS:function(){return c.BrowserDetect.os()},getDevice:function(){return c.BrowserDetect.device()},escapeForRegExp:function(D){return u.escapeForRegExp(D)},getTotalPageView:function(){var D=u.getSessionCookie();return(D&&D.pvc)?D.pvc:1},sampling:function(D){var E=this.entityId||D;if(E){var F=u.getWebengageCookie(),G=u.getHashCode(E+F.luid);return Math.abs(G%100)}return 0},getSessionCookieReferer:function(){var D=u.getSessionCookie();var E=D.referrer;if(!E){return null}return E},getXpathStringResult:function(D){if(c.ruleExecutor.dependency.util.xPathExists()){return c.XPATH.util.evaluateXPathQuery(D)}},getXpathIntegerResult:function(E){if(c.ruleExecutor.dependency.util.xPathExists()){var D=c.XPATH.util.evaluateXPathQuery(E);if(D){return parseFloat(D)}else{return null}}},loadDependency:function(D,F,H,E){var G=c.ruleExecutor.dependencies[D];if(G&&(typeof G==="function")){G(F,H,E)}else{if(E&&typeof E=="function"){E()}}}}})(c.ruleExecutor.constants));u.extend("ruleExecutor",(function(F,E){var C={};var D=function(){C={referer:F.getReferrers,url:u.getClientPageUrl(),cookie:function(G){return u.getCookie(G,true)},country:F.getCountry,region:F.getRegion,city:F.getCity,time:"",isFirstTime:F.isFirstTime,isSER:F.isSearchEngineReference,isSMR:F.isSocialMediaReference,searchTerms:F.getSearchTerms,os:F.getOS,device:F.getDevice,browser:F.getBrowser,endUserTime:F.getClientTime,publisherTime:F.getPublisherTime,browser_version:F.getBrowserVersion,totalPageView:F.getTotalPageView,sampling:F.sampling,contentXPathString:F.getXpathStringResult,contentXPathInteger:F.getXpathIntegerResult,contentXPathNode:F.getXpathStringResult,isDirectVisitor:F.getSessionCookieReferer,dayOfWeek:F.getClientDayOfWeek}};D();return{execute:function(H,J,G){var I=u.copy({},C);I=u.copy(I,(G?G:{}),true);I.entityId=H;J=(J!==e)?J:true;return(new Function("_weUtil","_ruleUtil","_constants","operands","return ("+J+");")(u,F,E,I))},loadOperands:function(){D()}}})(c.ruleExecutor.util,c.ruleExecutor.constants));u.extend("survey",(function(){var G=[],H=function(Q,K){if(Q!==e&&Q){var R=this,N=A.survey.config,P=N.theme||"",L="320px",U="1px",T=a.createElement("div");if(R._surveyOptions.width){var O=parseInt(R._surveyOptions.width,10);if(!isNaN(O)){L=O+"px"}}R.height=U;R.width=L;R.surveyConfigDto=N;R.theme=P;R.surveyEId=Q;R._weProperties=s;R.showOnExit=(typeof K==="boolean"?K:false);R.isMobileSurvey=(typeof isMobileSurvey=="boolean"?isMobileSurvey:false);var S=R._surveyOptions.scope[Q]||R._surveyOptions.scope.all||null;if(S){R.scope=(S.scope?S.scope:"");R.scopeType=(S.scopeType?S.scopeType:"")}s.widgetContainer.appendChild(T);T.setAttribute("id",s.widgetContainerId+"-survey-content");a.$SurveyWidgetInitializer={currentInstance:R,containerId:s.widgetContainerId,licenseCode:m,appHost:s.surveyAppHost,width:parseInt(L,10)};var M=s.widgetDomain+(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?s.loadSurveyWidgetUrlv3:s.loadSurveyWidgetUrl(R.layoutAttributes.id));u.withWeJquery(function(){var V=a.createElement("script");V.type="text/javascript";V.src=M;s.widgetContainer.appendChild(V)})}},F=function(N,P,K){if(N!==e&&N){if(typeof N==="object"){if(N instanceof Array){for(var L=0;L<N.length;L++){F(N[L],P,K)}}else{var M=N.scope;if(M){var O=N.surveyIds;if(O!==e&&O instanceof Array&&O.length>0){for(j=0;j<O.length;j++){K[O[j]]={scope:M,scopeType:(N.scopeType||"")}}}else{K.all={scope:M,scopeType:(N.scopeType||"")}}}}}else{K.all={scope:N,scopeType:(P||"")}}}},C=function(R,M,U){if(R&&R.length>0){var ai=(new Array()).concat(R);var al=ai[0],Y=u.getSessionCookie(),ae=u.getWebengageCookie(),X=u.getInitParamValue(U._surveyOptions,"alignment",A.survey.config.alignment,["left","right"]),W=al,ab=M[W].ruleCode,ac=M[W]["la"],N=M[W].startTimestamp,P=M[W].endTimestamp,Q=(typeof M[W].showOnExit==="boolean")?M[W].showOnExit:false,S=(Q?0:(M[W].totalTimeOnSite?M[W].totalTimeOnSite-((new Date()).getTime()-(Y.sst||0)):0)),ak=(Q?0:((parseInt(U._surveyOptions.delay,10)>=0)?parseInt(U._surveyOptions.delay,10):Math.max(S,M[W].timeSpent))),ag=M[W].maxTimesPerUser,O=U._surveyOptions.scope[W]||U._surveyOptions.scope.all||null,ad=W+(O&&O.scope&&(O.scopeType+"").toUpperCase()!="GLOBAL"?"["+u.escapeScopeChars(O.scope)+"]":""),ah=u.escapeForRegExp(ad),L=M[W].mobile,K=M[W].sampling||100;if(!U._surveyOptions.isDemoMode){if(typeof L!=="undefined"&&L&&!c.BrowserDetect.isMobile()){R.splice(0,1);return C(R,M,U)}if(!U._surveyOptions.forcedRender&&((Y&&Y.closedSurveys!==e&&(Y.closedSurveys.match("##"+ah+"##")||Y.closedSurveys.match("##"+ah+"$")))||(ae&&ae.takenSurveys!==e&&(ae.takenSurveys.match("##"+ah+"##")||ae.takenSurveys.match("##"+ah+"$"))))){ai.splice(0,1);return C(ai,M,U)}var aa=c.util.getTotalTimesShown(W,"survey");if(ag!==e){if(ag<=aa){ai.splice(0,1);return C(ai,M,U)}}var T={timeSpent:ak,showOnExit:Q,maxTimesPerUser:ag,startTimestamp:N,endTimestamp:P,ruleCode:ab,layoutAttributes:ac,sampling:K};E(W,T,U,function(){ai.splice(0,1);return C(ai,M,U)})}else{var T={timeSpent:ak,showOnExit:Q,maxTimesPerUser:ag,startTimestamp:N,endTimestamp:P,ruleCode:ab,layoutAttributes:ac,sampling:K};if(!U.surveysToExecuteData){U.surveysToExecuteData={}}U.surveysToExecuteData[W]=T;ai.splice(0,1);return C(ai,M,U)}}else{if(U.surveysToExecuteData){var aj=null;var af=[];for(var al in U.surveysToExecuteData){var Z=al;af[af.length]=Z;aj=((aj==null||aj>U.surveysToExecuteData[Z]["timeSpent"])?U.surveysToExecuteData[Z]["timeSpent"]:aj)}var V=U.startExecutionTime?(new Date()).getTime()-U.startExecutionTime:0;U.totalTimeElapsed=U.totalTimeElapsed+V;U.minTimespentVal=(aj-V<0)?0:aj-V;return I(af,U.surveysToExecuteData,U)}}},E=function(K,O,P,S){try{if(O.startTimestamp||O.endTimestamp){if(c.ruleExecutor.dependency.util.geoDataExists()){var R=u.getSessionCookie(),Q=(new Date()).getTime()+(R.tsD&&!isNaN(R.tsD)?parseInt(R.tsD,10):0),N=O.startTimestamp,L=O.endTimestamp;if(L<Q||Q<N){return S()}}}if((P._surveyOptions.skipRules)||(!O.ruleCode)||(c.ruleExecutor.execute(K,O.ruleCode,P._surveyOptions.ruleData))){if(!P.surveysToExecuteData){P.surveysToExecuteData={}}P.surveysToExecuteData[K]=O}return S()}catch(M){if(M&&M.type){c.ruleExecutor.util.loadDependency(M.type,O,function(){E(K,O,P,S)},S)}else{c.eLog(M);S()}}},J=function(N,L,O,K,M){totlatTimeElapsed=0;timespent=0;if(!O){if(arguments&&arguments[0]){timespent=L||0}if(parseInt(M._surveyOptions.delay,10)>=0){timespent=parseInt(M._surveyOptions.delay,10)}totlatTimeElapsed=M.totalTimeElapsed+M.minTimespentVal}c.setTimeout(function(){H.apply(M,[N,O])},((timespent-totlatTimeElapsed)<0?0:(timespent-totlatTimeElapsed)))},D=function(Q,M){var P=this;for(var N=0;N<Q.length;N++){var O=Q[0];var L=M[O].sampling||100;var K=c.ruleExecutor.util.sampling(O);if(L>=K){return O}else{c.util.markEntityAsShown(O,"survey",P,true);c.setTimeout(function(){P.dump("abs_view",{id:O})},10)}}},I=function(K,L,M){c.setTimeout(function(){if(!M._surveyOptions.forcedRender){var N=[];for(var P=0;P<K.length;P++){if(P>0){N[N.length]="&"}N[N.length]="surveyIds="+K[P]}var O=s.findAllTakenSurveysUrl()+"&"+N.join("")+(M._surveyOptions.scope?"&scope="+encodeURIComponent(u.stringify(M._surveyOptions.scope)):"");u.loadScript.apply(s.widgetContainer,[O,function(S,U,T){var Z=[],V={};if(typeof we_notToExecuteSurveyIdsMap!="undefined"){if(we_notToExecuteSurveyIdsMap.takenSurveyIds!==e&&we_notToExecuteSurveyIdsMap.takenSurveyIds.length>0){for(var R=0;R<we_notToExecuteSurveyIdsMap.takenSurveyIds.length;R++){var aa=M._surveyOptions.scope[we_notToExecuteSurveyIdsMap.takenSurveyIds[R]]||M._surveyOptions.scope.all||null;var ac=(aa&&aa.scope?aa.scope:"");var Y=(aa&&aa.scopeType?aa.scopeType:"");V[we_notToExecuteSurveyIdsMap.takenSurveyIds[R]]=true;u.markSurveyAsTaken((we_notToExecuteSurveyIdsMap.takenSurveyIds[R]+(ac&&(Y+"").toUpperCase()!="GLOBAL"?"["+u.escapeScopeChars(ac)+"]":"")))}}if(we_notToExecuteSurveyIdsMap.inactiveSurveyIds!==e&&we_notToExecuteSurveyIdsMap.inactiveSurveyIds.length>0){for(var X=0;X<we_notToExecuteSurveyIdsMap.inactiveSurveyIds.length;X++){V[we_notToExecuteSurveyIdsMap.inactiveSurveyIds[X]]=true}}}for(var ab=0;ab<U.length;ab++){if(!V[U[ab]]){Z[Z.length]=U[ab]}}if(Z.length>0){var W=D.apply(M,[Z,S]);if(W){M.layoutAttributes=S[W]["layoutAttributes"];J(W,(S[W]["timeSpent"]||0),S[W]["showOnExit"],S[W]["maxTimesPerUser"],M)}}},[L,K,M.totalTimeElapsed]])}else{var Q=D.apply(M,[K,L]);M.layoutAttributes=L[Q]["layoutAttributes"];J(Q,(L[Q]["timespent"]||0),L[Q]["showOnExit"],L[Q]["maxTimesPerUser"],M)}},M.minTimespentVal)};return{cbid:1,render:function(K){return c.withELog(function(){return(new function(){c.survey.clear();var O=this;O.cbid=1;G[G.length]=O;O.abort=function(){u.abortInstance(this)};var M={surveyId:f["webengage.survey.surveyId"]||"",skipRules:f["webengage.survey.skipRules"]||false,forcedRender:f["webengage.survey.forcedRender"]||false,delay:f["webengage.survey.delay"]||-1,customData:f["webengage.survey.customData"]||f["webengage.customData"]||{},ruleData:f["webengage.survey.ruleData"]||f["webengage.ruleData"]||{},isDemoMode:f["webengage.survey.isDemoMode"]||f["webengage.isDemoMode"]||false,alignment:f["webengage.survey.alignment"]||"",scope:f["webengage.survey.scope"]||f["webengage.scope"]||"",scopeType:f["webengage.survey.scopeType"]||f["webengage.scopeType"]||"",enableCallbacks:f["webengage.survey.enableCallbacks"]||f["webengage.enableCallbacks"]||false,width:f["webengage.survey.width"]};var U={showAllClosedAndTakenSurveys:"forcedRender",data:"customData",demo:"isDemoMode"};if(K!==e&&!u.isEmptyObject(K)){for(var L in K){var P=U[L];if(P!==e&&P){K[P]=K[L];delete K[L]}}}O._surveyOptions=u.copy(M,(K?K:{}),true);O._surveyOptions.forcedRender=typeof O._surveyOptions.forcedRender==="boolean"?O._surveyOptions.forcedRender:false;if(O._surveyOptions.forcedRender){O._surveyOptions.scope=(new Date()).getTime();O._surveyOptions.scopeType="session"}var N={};F(O._surveyOptions.scope,O._surveyOptions.scopeType,N);O._surveyOptions.scope=N||"";O.enableCallbacks=(typeof O._surveyOptions.enableCallbacks==="boolean"?O._surveyOptions.enableCallbacks:false);if(A.survey&&(A.survey.isEnabled||O._surveyOptions.isDemoMode)&&!u.isEmptyObject(A.survey.ruleMap)&&(a.location.protocol=="http:"||(a.location.protocol=="https:"&&A.sslEnabled))&&!A.isSRQuotaOver){u.copy(O,y,true);O.onLoad((O._surveyOptions.onLoad||f["webengage.survey.onLoad"]));O.onSubmit((O._surveyOptions.onSubmit||f["webengage.survey.onSubmit"]));O.onClose((O._surveyOptions.onClose||f["webengage.survey.onClose"]));O.onOpen((O._surveyOptions.onOpen||f["webengage.survey.onOpen"]));O.onComplete((O._surveyOptions.onComplete||f["webengage.survey.onComplete"]));O.dump=function(ab,X){var aa=this;var Z={id:aa.surveyEId,layoutId:aa.layout};u.copy(Z,(X||{}),true);Z.tvc=u.getTotalTimesShown(Z.id,"survey",false,(ab==="abs_view"?true:false));Z.tvcs=u.getTotalTimesShown(Z.id,"survey",true,(ab==="abs_view"?true:false));if(!u.isEmptyObject(aa.layoutAttributes)){Z.layoutAttrs=aa.layoutAttributes}if(aa.theme){Z.theme=aa.theme}if(aa.showOnExit){Z.showOnExit=aa.showOnExit}if(!u.isEmptyObject(aa._surveyOptions.ruleData)){var V=aa._surveyOptions.ruleData;Z.ruleData={};for(var W in V){if(V[W]&&V[W].constructor==Date){Z.ruleDataDate=Z.ruleDataDate||{};Z.ruleDataDate[W]=V[W];continue}Z.ruleData[W]=V[W]}}if(!u.isEmptyObject(aa._surveyOptions.customData)){var Y=aa._surveyOptions.customData;Z.customData={};for(var W in Y){if(Y[W]&&Y[W].constructor==Date){Z.customDataDate=Z.customDataDate||{};Z.customDataDate[W]=Y[W];continue}Z.customData[W]=Y[W]}}this.executeCallbacks("dump",Z,ab);c.dump("survey",ab,Z)};u.attachEventListners("survey",O);O.totalTimeElapsed=0;var Q=A.survey.ruleMap,T=A.survey.order,R=O._surveyOptions.surveyId;if(R&&Q[R]){var S=[];S[0]=R;T=S}O.startExecutionTime=(new Date()).getTime();C(T,Q,O)}else{if(A.survey&&A.survey.isEnabled&&a.location.protocol=="https:"&&!A.sslEnabled){c.eLog(null,"error","Survey - Widget turned off for SSL encrypted page","Survey - Widget turned off for SSL encrypted page")}}})})},clear:function(){c.withELog(function(){try{if(a.getElementById(s.widgetContainerId+"-base")){var K=a.getElementsByTagName("webengagedata")[0]}else{s.widgetContainer.removeChild(a.getElementById(s.widgetContainerId+"-survey-content"))}}catch(L){}a.$SurveyWidgetInitializer=null;G=[]})},abort:function(){u.abortAllInstances(G)},attachEventListner:function(){var K=this,L=arguments;c.withELog(function(){u.bind.apply(K,L);if(G.length>0){for(var M=0;M<G.length;M++){G[M].enableCallbacks=true;u.bind.apply(G[M],L)}}})}}})());u.extend("IFRAMES",(function(){var C=[];return{create:function(F,H,J){this.remove(F);var K=J||{};var D;try{D=a.createElement('<iframe name="'+F+'">')}catch(I){D=a.createElement("iframe");D.name=F}D.id=F;if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){D.src="javascript:void(0);"}D.frameBorder=K.frameBorder||"0";D.marginHeight=K.marginHeight||"0";D.marginWidth=K.marginWidth||"0";D.allowTransparency=K.allowTransparency||"true";var E=D.style;E.zIndex=(u.getMaxZIndex()+1);E.position="absolute";E.backgroundColor=K.backgroundColor||"transparent";E.bottom=K.bottom||"0px";E.right=K.right||"0px";E.border=K.border||"none";E.overflow=K.overflow||"hidden";E.visibility=K.visibility||"hidden";var G=H||s.widgetContainer;G.appendChild(D);C[F]=D;try{D.contentWindow.name}catch(I){c.eLog(I);D.src='javascript:(function () {document.open();document.domain="'+a.domain+'";document.close();})();'}if(typeof(K.onload)==="function"){u.addListener(D,"load",K.onload)}return D},get:function(D){return C[D]},resize:function(E,D,F){var G=c.IFRAMES.get(E);G.style.height=D+"px"},remove:function(D){var E=c.IFRAMES.get(D);if(E){if(E.parentNode){E.parentNode.removeChild(E)}}if(d.frames[D]){delete d.frames[D]}delete C[D]},creatCallbackFrame:function(G,E,J,D){var I={};if(typeof(D)==="function"){I.onload=function(){c.withELog(function(){var M=C[G];if(!M.widgetCallBackStatus||M.widgetCallBackStatus===0){M.widgetCallBackStatus=1}else{if(M.widgetCallBackStatus===1){M.contentWindow.location="about:blank";M.widgetCallBackStatus=2}else{if(M.widgetCallBackStatus===2){var N=(new Date()).getTime()+"CB";if(!c.IFRAMES.CB){c.IFRAMES.CB={}}c.IFRAMES.CB[N]=function(O){setTimeout(function(){if(O!==e&&O!==""){try{var Q=u.parseJSON(O);if(Q!==null){if(Q.eventName!==e){D(Q.eventName,Q.data)}}}catch(P){c.eLog(P)}}M.widgetCallBackStatus=0;c.IFRAMES.remove(G);M=c.IFRAMES.creatCallbackFrame(G,E,J,D)},10)};try{var K=M.contentWindow.name;c.IFRAMES.CB[N](K)}catch(L){c.eLog(L);M.src="javascript:(function () {document.write('<script>var _data=window.name;document.domain=\""+a.domain+'";setTimeout(function(){window.parent.webengage.IFRAMES.CB["'+N+"\"](_data);}, 10);<\/script>')})();"}}}}})}}var H=c.IFRAMES.create(G,E,I);var F=H.style;F.height=0;F.width=0;if(J){H.src=J}return H}}})());u.extend("notification",(function(){var G=[],D=function(O,N,M,I){var Q=this;if(O||Q._notificationOptions.previewJson!==e){Q.notificationId=Q.notificationEId=O;Q.showOnExit=I;Q.layout=N||(Q._notificationOptions.previewJson&&Q._notificationOptions.previewJson.layout?Q._notificationOptions.previewJson.layout:"");var P=Q.executeCallbacks("run",Q);if(typeof P==="boolean"&&!P){return}var K=c.IFRAMES.create(s.widgetContainerId+"-notification-frame",s.widgetContainer);K.style.top="-1000px";K.style.left="-1000px";var S=u.getSessionCookie();var L=null;if(K.contentDocument){L=K.contentDocument}else{if(K.contentWindow){L=K.contentWindow.document}else{if(K.document){L=K.document}}}L.open();var J=(Q.layout===""?"notification-base.css":Q.layout+"-notification-base.css");var H=(c.BrowserDetect.ie()&&c.BrowserDetect.version()<8)?'<link rel="stylesheet" type="text/css" href="//d3701cc9l7v9a6.cloudfront.net/css/responsive/assets/css/font/webengage/widget-font-ie7/ie7.css?v=385.00" media="screen"/><script type="text/javascript" src="//d3701cc9l7v9a6.cloudfront.net/css/responsive/assets/css/font/webengage/widget-font-ie7/ie7.js?v=385.00"><\/script><style type="text/css">.icon-large{font-size:1.3333333333333333em;margin-top:-4px;padding-top:3px;margin-bottom:-4px;padding-bottom:3px;vertical-align:middle;}.icon-extra-large{font-size:2em;margin-top:-4px;padding-top:3px;margin-bottom:-4px;padding-bottom:3px;vertical-align:middle;}</style>':"";var R=(c.BrowserDetect.ie()&&c.BrowserDetect.version()===8)?'<style type="text/css">.icon-large{font-size:1.3333333333333333em;margin-top:-4px;padding-top:3px;margin-bottom:-4px;padding-bottom:3px;vertical-align:middle;}.icon-extra-large{font-size:2em;margin-top:-4px;padding-top:3px;margin-bottom:-4px;padding-bottom:3px;vertical-align:middle;}</style>':"";L.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="cache-control" content="max-age=0" /><meta http-equiv="cache-control" content="no-cache" /><meta http-equiv="pragma" content="no-cache" /><meta http-equiv="content-type" content="text/html; charset=utf-8"/><link id="widget-font-id" rel="stylesheet" type="text/css" href="//d3701cc9l7v9a6.cloudfront.net/css/responsive/assets/css/font/webengage/widget-font.css?v=385.00" media="screen"/><link rel="stylesheet" type="text/css" href="//d3701cc9l7v9a6.cloudfront.net/css/webengage/notification/'+J+'?v=385.00" media="screen"/>'+H+R+'<script type="text/javascript">try{window.parent.window.name}catch(e){document.domain="'+a.domain+'";};<\/script><script type="text/javascript" src="//d3701cc9l7v9a6.cloudfront.net/js/jquery/jquery-1.3.2.min.js"><\/script></head><body class="notification-body"><script type="text/javascript">window.onload = function () { (function(d){ var _script = d.createElement("script"); _script.type = "text/javascript"; _script.src = "'+s.widgetDomain+s.notificationWidgetScriptUrl+'"; d.body.appendChild(_script); })(document);};<\/script></body></html>');L.close();c.setTimeout(function(){if(Q._notificationOptions.previewJson!==e){L.$NotificationWidgetInitializer={currentInstance:Q,notificationVersion:M,containerId:s.widgetContainerId,licenseCode:m,appHost:s.baseWebEngageUrl,widgetDomain:s.widgetDomain,previewJson:Q._notificationOptions.previewJson}}else{L.$NotificationWidgetInitializer={currentInstance:Q,notificationVersion:M,containerId:s.widgetContainerId,licenseCode:m,appHost:s.baseWebEngageUrl,widgetDomain:s.widgetDomain,browser:c.BrowserDetect.browser(),browserVersion:c.BrowserDetect.version(),os:c.BrowserDetect.os(),country:S.country||"",city:S.city||"",region:S.region||"",pageTitle:a.title,ip:S.ip,referrer:a.referrer}}},0)}},C=function(M,I,O){if(M&&M.length>0){var S=(new Array()).concat(M);var ab=S[0],W=u.getWebengageCookie(),Q=u.getSessionCookie(),H=ab,Y=I[H].layout,K=(webengage_fs_configurationMap.config.notificationConfig.wl?"W":"N")+I[H].version,V=I[H].ruleCode,L=(I[H].totalTimeOnSite?I[H].totalTimeOnSite-((new Date()).getTime()-(Q.sst||0)):0),aa=((parseInt(O._notificationOptions.delay,10)>=0)?parseInt(O._notificationOptions.delay,10):Math.max(L,I[H].timespent)),N=I[H].skipTargetPage,T=I[H].actionLinks,J=(typeof I[H].showOnExit==="boolean"?I[H].showOnExit:false),Z=I[H].maxTimesPerUser,R=I[H].mobile;if(!O._notificationOptions.isDemoMode){if(typeof R!=="undefined"&&R&&!c.BrowserDetect.isMobile()){S.splice(0,1);return C(S,I,O)}if(!O._notificationOptions.forcedRender&&((Q&&Q.closedNIds!==e&&Q.closedNIds.indexOf("##"+H)>=0)||(W&&W.takenNIds!==e&&W.takenNIds.indexOf("##"+H)>=0))){S.splice(0,1);return C(S,I,O)}if(N&&T instanceof Array&&T.length>0){for(var X in T){var P=a.createElement("a");P.href=T[X];T[X]="^"+u.escapeForRegExp(P.href)+"$";P=null}if(c.ruleExecutor.util.isMatches(u.getClientPageUrl(),T)){S.splice(0,1);return C(S,I,O)}}var U=c.util.getTotalTimesShown(H,"notification");if(!O._notificationOptions.isDemoMode&&Z!==e){if(Z<=U){S.splice(0,1);return C(S,I,O)}}I[H]["timeSpent"]=aa;F(H,I[H],O,function(){S.splice(0,1);return C(S,I,O)})}else{I[H]["timeSpent"]=aa;E(H,I[H],O)}}},F=function(N,H,O,S){try{if(H.startTimestamp||H.endTimestamp){if(c.ruleExecutor.dependency.util.geoDataExists()){var Q=u.getSessionCookie();var P=(new Date()).getTime()+(Q.tsD&&!isNaN(Q.tsD)?parseInt(Q.tsD,10):0);var L=H.startTimestamp,I=H.endTimestamp;if(I<P||P<L){return S()}}}if((O._notificationOptions.skipRules)||(!H.ruleCode)||(c.ruleExecutor.execute(N,H.ruleCode,O._notificationOptions.ruleData))){var J=O.startExecutionTime?(new Date()).getTime()-O.startExecutionTime:0;O.totalTimeElapsed=O.totalTimeElapsed+J;var M=H.sampling||100;var R=c.ruleExecutor.util.sampling(N);if(M>=R){return E(N,H,O)}else{c.util.markEntityAsShown(N,"notification",O,true);c.setTimeout(function(){O.dump("abs_view",{id:N})},10);return S()}}else{return S()}}catch(K){if(K&&K.type){c.ruleExecutor.util.loadDependency(K.type,H,function(){F(N,H,O,S)},S)}else{c.eLog(K);S()}}},E=function(K,I,J){var H=I.timeSpent||0;if(parseInt(J._notificationOptions.delay,10)>=0){H=parseInt(J._notificationOptions.delay,10)}function L(){u.withWeJquery(function(){c.setTimeout(function(){D.apply(J,[K,I.layout,I.version,I.showOnExit])},(I.showOnExit?0:((H-J.totalTimeElapsed)<0?0:(H-J.totalTimeElapsed))))})}c.GEO.load(L,L)};return{cbid:1,render:function(H){return c.withELog(function(){return(new function(){c.notification.clear();var N=this;N.cbid=1;G[G.length]=N;N.abort=function(){u.abortInstance(this)};var J={notificationId:f["webengage.notification.notificationId"]||"",skipRules:f["webengage.notification.skipRules"]||false,delay:f["webengage.notification.delay"]||-1,isDemoMode:f["webengage.notification.isDemoMode"]||f["webengage.isDemoMode"]||false,customData:f["webengage.notification.customData"]||f["webengage.customData"]||{},ruleData:f["webengage.notification.ruleData"]||f["webengage.ruleData"]||{},tokens:f["webengage.notification.tokens"]||f["webengage.tokens"]||{},previewJson:f["webengage.notification.previewJson"],forcedRender:f["webengage.notification.forcedRender"]||false,enableCallbacks:f["webengage.notification.enableCallbacks"]||f["webengage.enableCallbacks"]||false};var K={data:"customData",demo:"isDemoMode"};if(H!==e&&!u.isEmptyObject(H)){for(var I in H){var O=K[I];if(O!==e&&O){H[O]=H[I];delete H[I]}}}N._notificationOptions=u.copy(J,(H?H:{}),true);N.enableCallbacks=(typeof N._notificationOptions.enableCallbacks==="boolean"?N._notificationOptions.enableCallbacks:false);u.copy(N,y,true);N.onRun((N._notificationOptions.onRun||f["webengage.notification.onRun"]));N.onLoad((N._notificationOptions.onLoad||f["webengage.notification.onLoad"]));N.onClick((N._notificationOptions.onClick||f["webengage.notification.onClick"]));N.onClose((N._notificationOptions.onClose||f["webengage.notification.onClose"]));N.onOpen((N._notificationOptions.onOpen||f["webengage.notification.onOpen"]));u.attachEventListners("notification",N);N.dump=function(X,T){var W=this;var V={id:W.notificationId,layoutId:W.layout};u.copy(V,T||{},true);V.tvc=u.getTotalTimesShown(V.id,"notification",false,(X==="abs_view"?true:false));V.tvcs=u.getTotalTimesShown(V.id,"notification",true,(X==="abs_view"?true:false));if(!u.isEmptyObject(W.layoutAttributes)){V.layoutAttrs=W.layoutAttributes}if(!u.isEmptyObject(W.config)){V.theme=W.config}if(!u.isEmptyObject(W._notificationOptions.tokens)){V.tokens=u.copy({},W._notificationOptions.tokens)}if(!u.isEmptyObject(W._notificationOptions.ruleData)){var R=W._notificationOptions.ruleData;V.ruleData={};for(var S in R){if(R[S]&&R[S].constructor==Date){V.ruleDataDate=V.ruleDataDate||{};V.ruleDataDate[S]=R[S];continue}V.ruleData[S]=R[S]}}if(!u.isEmptyObject(W._notificationOptions.customData)){var U=W._notificationOptions.customData;V.customData={};for(var S in U){if(U[S]&&U[S].constructor==Date){V.customDataDate=V.customDataDate||{};V.customDataDate[S]=U[S];continue}V.customData[S]=U[S]}}if(W.clickedCTA){V.cta=W.clickedCTA}this.executeCallbacks("dump",V,X);c.dump("notification",X,V)};if(N._notificationOptions.previewJson!==e){u.withWeJquery(function(){D.apply(N)})}else{if(A.notification&&(A.notification.isEnabled||N._notificationOptions.isDemoMode)&&(a.location.protocol=="http:"||(a.location.protocol=="https:"&&A.sslEnabled))&&!A.isNQuotaOver){var P=A.notification.order,L=A.notification.ruleMap;N.totalTimeElapsed=0;var M=N._notificationOptions.notificationId;if(M&&L[M]){var Q=[];Q[0]=M;P=Q}N.startExecutionTime=(new Date()).getTime();C(P,L,N)}else{if(A.notification&&A.notification.isEnabled&&a.location.protocol=="https:"&&!A.sslEnabled){c.eLog(null,"error","Notification - Widget turned off for SSL encrypted page","Notification - Widget turned off for SSL encrypted page")}}}})})},getNotificationFrame:function(){return a.getElementById(s.widgetContainerId+"-notification-frame")},resize:function(J){var I=a.getElementById(s.widgetContainerId+"-notification-frame");I.height=J.height||I.contentWindow.document.body.scrollHeight;I.width=J.width||I.contentWindow.document.body.scrollWidth;var H=I.style;H.visibility="visible";H.height=parseInt(J.height||I.contentWindow.document.body.scrollHeight)+"px";H.width=parseInt(J.width||I.contentWindow.document.body.scrollWidth)+"px";H.top="auto";H.bottom="0px";H.left="auto";if("right"==J.launchType){H.right="0px"}else{H.left="0px"}},clear:function(){var H=this;c.withELog(function(){try{c.IFRAMES.remove(s.widgetContainerId+"-notification-frame")}catch(I){}G=[]})},abort:function(){u.abortAllInstances(G)},attachEventListner:function(){var H=this,I=arguments;c.withELog(function(){u.bind.apply(H,I);if(G.length>0){for(var J=0;J<G.length;J++){G[J].enableCallbacks=true;u.bind.apply(G[J],I)}}})}}})());u.extend("",{abort:function(){c.withELog(function(){c.feedback.abort();c.survey.abort();c.notification.abort()})}});u.extend("",{init:function(C){var D=function(E){if(C[E]!==e&&C[E]){f["webengage."+E]=C[E]}};D("licenseCode");D("language");D("isDemoMode");D("delay");f["webengage.widgetVersion"]="3.0";if(f["webengage.licenseCode"]!==e&&f["webengage.licenseCode"]){u.onDocReady(t)}return c}});u.extend("",{onReady:function(C){if(C!==e&&typeof C==="function"){f["webengage.oldOnReady"]=C}}});u.extend("",{render:function(C){if(C){if(C.showFeedbackByDefault!==e&&!C.showFeedbackByDefault){f["webengage.feedback.defaultRender"]=false}if(C.showSurveyByDefault!==e&&!C.showSurveyByDefault){f["webengage.survey.defaultRender"]=false}if(C.showNotificationByDefault!==e&&!C.showNotificationByDefault){f["webengage.notification.defaultRender"]=false}}o()}});var t=function(){m=f["webengage.licenseCode"];var E=a.createElement("webengagedata");a.body.insertBefore(E,null);s.weDataContainer=E;try{var I=a.createElement("style");var F=a.createTextNode("#webklipper-publisher-widget-container, #webklipper-publisher-widget-container * {overflow:visible; -webkit-box-sizing: content-box; -moz-box-sizing: content-box;  box-sizing: content-box;}");I.type="text/css";if(I.styleSheet){I.styleSheet.cssText=F.nodeValue}else{I.appendChild(F)}s.weDataContainer.appendChild(I)}catch(H){}var C=a.createElement("div");C.setAttribute("id",s.widgetContainerId);s.weDataContainer.appendChild(C);s.widgetContainer=C;var D=u.getWebengageCookie();if(!D){D=u.setWebengageCookie()}else{if(!D.luid){D=u.setWebengageCookie(u.getWebengageCookie())}}var G=u.getSessionCookie();if(!G||!G.suid){G=u.setSessionCookie(u.getSessionCookie(),true);D=u.updateTSC()}D=u.updateTPVC();if(typeof D.isGzip==="undefined"||!D.isGzip){u.loadScript.apply(s.widgetContainer,["//z.webengage.com/gz.js",function(){D=u.setGZIPFlag((typeof f.isGzip!="undefined"&&f.isGzip?true:false));p(D.isGzip,D.luid,G.suid)}])}else{p(D.isGzip,D.luid,G.suid)}};var p=function(D,E,C){d.webengage.setTimeout(function(){var G=(D?"webengage-zfiles":"webengage-files");var F="//s3.amazonaws.com/"+G+"/webengage/"+m+"/v3.js?r="+Math.floor((new Date()).getTime()/60000)+"&u="+E+"|"+C;u.loadScript.apply(s.widgetContainer,[F,function(){var H=c.setInterval(function(){if(typeof webengage_fs_configurationMap!=="undefined"&&webengage_fs_configurationMap.config){clearInterval(H);if(((webengage_fs_configurationMap.sites!==e&&webengage_fs_configurationMap.sites)||(webengage_fs_configurationMap.domain!==e&&webengage_fs_configurationMap.domain))&&!f["webengage.isDemoMode"]){var N=false;var I=u.getClientPageHost(),L;if(I.match(/\:[\d]*$/)){L=I.substring(I.indexOf(":")+1,I.length);I=I.substring(0,I.indexOf(":"))}var T=[];var O=[];if(webengage_fs_configurationMap.sites===e||!webengage_fs_configurationMap.sites){webengage_fs_configurationMap.sites={};webengage_fs_configurationMap.sites[webengage_fs_configurationMap.domain]="DOMAIN"}for(var R in webengage_fs_configurationMap.sites){var P=R,S;if(webengage_fs_configurationMap.sites[R]=="DOMAIN"){T[T.length]=P;if(P.match(/^www\./i)){P=P.substring(4,P.length)}if(P.match(/\:[\d]*$/)){S=P.substring(P.indexOf(":")+1,P.length);P=P.substring(0,P.indexOf(":"))}if((I.match(new RegExp(u.escapeForRegExp(P)+"$","gi"))&&(!S||S==L))){N=true;break}}else{if(webengage_fs_configurationMap.sites[R]=="REGEXP"){var K=P;O[O.length]=P;if((u.getClientPageUrl().match(K))){N=true;break}}}}N=(f["webengage.notification.previewJson"]?true:N);if(!N){var M='The <a style="color: #00f;" href="http://webengage.com/" target="_blank">WebEngage (Survey, Feedback &amp; Notification)</a> widget on this page is incorrectly configured. It is meant for use only on ';if(T.length>0){M+="<b>"+T.join(", ")+"</b>"}if(O.length>0){if(T.length>0){M+=(" and ")}M+=("pages with URLs that matches following regular expression(s) <b>"+O.join(", ")+"</b>")}c.logger.error(M+".");return}}s.publisherTimeZoneOffset=webengage_fs_configurationMap.tzo;u.copy(A,(function(U){return{configurationMap:U?U:{}}})(webengage_fs_configurationMap));var Q=u.getSessionCookie(),J=u.getWebengageCookie();if(!f["webengage.isDemoMode"]&&!Q.vtd){c.dump("visitor","new-session",{lp:a.location.href});u.setVTD();u.setLST()}w(G)}},1)},null,function(){}])},(f["webengage.delay"]&&parseInt(f["webengage.delay"])>0?parseInt(f["webengage.delay"]):0))},B=function(G,C,E,F){var D="//s3.amazonaws.com/"+G+"/webengage/"+m+"/"+C[E]+".js?r="+F[E];u.loadScript.apply(s.widgetContainer,[D,function(){if(E==(C.length-1)){g()}else{B.apply(this,[G,C,(E+1),F])}}])},k=function(H){var D=f["webengage.customWidgetCode.ruleData"]||f["webengage.ruleData"]||{};customWidgetCodeIdsToExecuteClient=[];customWidgetCodeIdsToExecuteClientTimestamps=[];if(webengage_fs_configurationMap.cwcRuleList){var F=webengage_fs_configurationMap.cwcRuleList;for(var E=0;E<F.length;E++){var G=F[E].ruleCode;if(G){if(!c.ruleExecutor.execute(F[E].cwcEncId,G,D)){continue}}var C=customWidgetCodeIdsToExecuteClient.length;customWidgetCodeIdsToExecuteClient[C]=F[E].cwcEncId;customWidgetCodeIdsToExecuteClientTimestamps[C]=F[E].lastModifiedTimestamp}}if(customWidgetCodeIdsToExecuteClient.length>0){B.apply(this,[H,customWidgetCodeIdsToExecuteClient,0,customWidgetCodeIdsToExecuteClientTimestamps])}else{g()}},w=function(C){if((a.location.protocol=="http:"||(a.location.protocol=="https:"&&webengage_fs_configurationMap.sslEnabled))){u.usckwl(webengage_fs_configurationMap.domain);if(webengage_fs_configurationMap.cwcRuleList&&webengage_fs_configurationMap.cwcRuleList.length>0){k(C)}else{g()}}else{if(a.location.protocol=="https:"&&!A.sslEnabled){c.eLog(null,"error","Widget turned off for SSL encrypted page","CustomWidgetCode - Widget turned off for SSL encrypted page")}}},g=function(){(function(D){u.extend("widgetConfiguration",{});if(D&&D.config){u.copy(A,{feedback:{isEnabled:(typeof D.config.enableFeedback=="boolean"&&D.config.enableFeedback),config:D.config.feedbackConfig?D.config.feedbackConfig:{}}},true);u.copy(A,{survey:{isEnabled:(typeof D.config.enableSurvey=="boolean"&&D.config.enableSurvey),config:D.config.surveyConfig?D.config.surveyConfig:{},order:[],ruleMap:{}}},true);(function(G){if(D.surveyRuleList){var E=D.surveyRuleList;for(var F=0;F<E.length;F++){G.order[F]=E[F].surveyEncId;G.ruleMap[E[F].surveyEncId]=E[F]}}})(A.survey);u.copy(A,{notification:{isEnabled:(typeof D.config.enableNotification=="boolean"&&D.config.enableNotification),order:[],ruleMap:{}}},true);(function(F){if(D.notificationRuleList){var G=D.notificationRuleList;for(var E=0;E<G.length;E++){F.order[E]=G[E].notificationEncId;F.ruleMap[G[E].notificationEncId]={ruleCode:G[E].ruleCode,timespent:parseInt(G[E].timeSpent)!="NaN"?parseInt(G[E].timeSpent):0,totalTimeOnSite:parseInt(G[E].totalTimeOnSite)!="NaN"?parseInt(G[E].totalTimeOnSite):0,actionLinks:G[E].actionLinks||[],skipTargetPage:typeof(G[E].skipTargetPage)=="boolean"?G[E].skipTargetPage:false,maxTimesPerUser:G[E].maxTimesPerUser,startTimestamp:G[E].startTimestamp,endTimestamp:G[E].endTimestamp,layout:G[E].layout,version:((typeof G[E].v!="undefined")?G[E].v:0),showOnExit:G[E].showOnExit,mobile:G[E].mobile,sampling:G[E].sampling}}}})(A.notification);u.copy(A,{sslEnabled:(D.sslEnabled?D.sslEnabled:false),isSRQuotaOver:(D.isSRQ?D.isSRQ:false),isNQuotaOver:(D.isNQ?D.isNQ:false),isFQuotaOver:(D.isFQ?D.isFQ:false)},true);u.uwats(D.lastWidgetCheckDate)}function C(){if(f["webengage.oldOnReady"]!==e&&typeof f["webengage.oldOnReady"]==="function"){f["webengage.oldOnReady"].apply(this)}else{if(f["webengage.onReady"]!==e&&typeof f["webengage.onReady"]==="function"){f["webengage.onReady"].apply(this);o()}else{o()}}if(c.BrowserDetect.ie()&&c.BrowserDetect.version()<11&&d.attachEvent){d.attachEvent("onbeforeunload",function(){c.withELog(function(){c.winUnloading=true;u.setWebengageCookie(u.getWebengageCookie());u.updateSessionCookie(u.getSessionCookie())})})}}if(D&&D.goals!==e&&D.goals instanceof Array){u.loadScript.apply(s.widgetContainer,[s.csUrl,function(){if(typeof f["webengage.conversion.start"]==="function"){f["webengage.conversion.start"](D)}}])}if(D&&D.GAEnabled){if((f["GA.universalAnalyticsFunction"]&&typeof d[f["GA.universalAnalyticsFunction"]]==="function")||typeof d.ga==="function"||d._gaq){u.loadScript.apply(s.widgetContainer,[s.gaCallbacksScriptUrl,C,null,C])}else{c.eLog(f["webengage.licenseCode"],"error","_gaq/ga undefined - not loading ga-callback-helper","_gaq/ga undefined");C()}}else{C()}})(A.configurationMap)},o=function(){var C=function(E){var D=typeof f["webengage."+E+".defaultRender"]==="boolean"?f["webengage."+E+".defaultRender"]:f["webengage.defaultRender"];return(typeof D==="boolean"?D:true)};if(C("feedback")){setTimeout(function(){c.feedback.render()},1)}if(C("survey")){setTimeout(function(){c.survey.render()},1)}if(C("notification")){setTimeout(function(){c.notification.render()},1)}};if(d.webengageWidgetInit!==e&&typeof d.webengageWidgetInit==="function"){d.webengageWidgetInit()}else{var r=a.getElementsByTagName("webengage")[0];if(r&&r.attributes){var q=r.attributes;f["webengage.licenseCode"]=q.license.value;f["webengage.language"]=(q.language?q.language.value:"");if(q.feedbackButtonAlignment){f["webengage.feedback.alignment"]=q.feedbackButtonAlignment.value}if(q.feedbackExternalLinkId){f["webengage.feedback.externalLinkId"]=q.feedbackExternalLinkId.value}}if(f["webengage.licenseCode"]!==e&&f["webengage.licenseCode"]){u.onDocReady(t)}}if(location.search.indexOf("libraryScript")>-1||sessionStorage.getItem("webengage-library")=="true"){var h=new RegExp("[\\?&]libraryScript=([^&#]*)");var v=h.exec(location.search);var z;if(v!=null){z=decodeURIComponent(v[1]);sessionStorage.setItem("webengage-library-script",z)}else{if(sessionStorage.getItem("webengage-library-script")){z=sessionStorage.getItem("webengage-library-script")}}sessionStorage.setItem("webengage-library","true");if(z){c.util.withWeJquery(function(){c.util.loadScript.apply(s.widgetContainer,["//d3701cc9l7v9a6.cloudfront.net/js/library/"+z+".js?v=385.00",function(){c.feedback.abort();c.survey.abort();c.notification.abort();sessionStorage.setItem("webengage-library",true)}])})}}};if(navigator.appName=="Microsoft Internet Explorer"){if(a.body&&(a.body.readyState=="loaded"||a.body.readyState=="complete")){b()}else{if(d.addEventListener){d.addEventListener("load",function(){b()},false)}else{if(d.attachEvent){d.attachEvent("onload",function(){b()})}}}}else{b()}c.getUser=function(){var g=c.util.getSessionCookie();return{pageUrl:d.location.href,pageTitle:a.title,referrer:(a.referrer||""),browser:c.BrowserDetect.browser(),browserVersion:c.BrowserDetect.version(),platform:c.BrowserDetect.os(),ip:(g?g.ip:""),city:(g?g.city:""),country:(g?g.country:"")}}})(window,document,_weq,webengage)},10);